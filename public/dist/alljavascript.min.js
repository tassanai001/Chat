var app={};!function(){app=angular.module("MainApp",["ngRoute","ngSanitize","ngResource","ngAnimate","mgcrea.ngStrap"]),app.config(["$routeProvider","$locationProvider",function(e,n){n.html5Mode(!1).hashPrefix("!"),e.when("/",{templateUrl:"/views/index.html",controller:"mainCtrl"}).when("/sample",{templateUrl:"/views/sample/sample.html",controller:"sampleCtrl"}).otherwise({redirectTo:"/"}).when("/scrub",{templateUrl:"/views/ScrubDomain/scrubdomain.html",controller:"scrubCtrl"}).otherwise({redirectTo:"/"})}])}();var spinner={},token="XXX";!function(){toastr.options={closeButton:!1,debug:!1,progressBar:!1,positionClass:"toast-bottom-right",onclick:null,showDuration:"300",hideDuration:"1000",timeOut:"5000",extendedTimeOut:"1000",showEasing:"swing",hideEasing:"linear",showMethod:"fadeIn",hideMethod:"fadeOut"};var e={lines:11,length:23,width:8,radius:40,corners:1,rotate:9,color:"#FFF",speed:1,trail:50,shadow:!1,hwaccel:!0,zIndex:2e9,top:"50%",left:"50%"},n=null;spinner.show=function(){var t=document.getElementById("spinner");null==n?n=new Spinner(e).spin(t):n.spin(t),$.blockUI({message:null,overlayCSS:{backgroundColor:"#5c5c5c"}})},spinner.hide=function(){var e=document.getElementById("spinner");n.stop(e),$.unblockUI()}}(),function(){app.controller("globalCtrl",["$scope",function(e){e.pageData=[{Name:"Home"},{Name:"Sample"}],e.directiveTest="HELLO WORLD"}])}(),function(){app.directive("directiveSample",function(){return{restrict:"AEC",replace:!0,require:"ngModel",scope:!0,link:function(e,n,t,r){r.$render=function(){n.empty(),n.append(r.$viewValue)}}}})}(),function(){Date.prototype.addHours=function(e){return this.setHours(this.getHours()+e),this},app.filter("DateTrick",function(){return function(e){if(null!==e){var n=e.addHours(7);return n}return{}}})}(),function(){app.controller("mainCtrl",["$scope","mainService","searchEngineService",function(e,n,t){e.activePage=1,e.initMT=function(){n.GetSample().then(function(n){e.testData=n})},e.SubmitKeyword=function(){t.addKeyword({keywords:e.inputkeywords}).then(function(e){console.log(e)})}}])}(),function(){app.factory("mainService",["$http","$q",function(e,n){var t={};return t.GetSample=function(){spinner.show();var t=n.defer();return e({method:"GET",url:"/sample"}).success(function(e){spinner.hide(),t.resolve(e)}).error(function(e){spinner.hide(),t.reject(e)}),t.promise},t}])}(),function(){app.controller("sampleCtrl",["$scope","$modal","sampleService",function(e,n,t){e.activePage=2,e.readSampleData=[],e.createSample=function(){t.createSample().then(function(n){"ERROR"!=n?(toastr.success("การบันทึกสำเร็จ","การบันทึกข้อมูล"),e.readSampleData.push(n)):toastr.warning("การบันทึกผิดพลาด"+n,"การบันทึกข้อมูล")})},e.createNewSample=function(){t.createNewSample(e.modalData).then(function(n){"ERROR"!=n?(toastr.success("การบันทึกสำเร็จ","การบันทึกข้อมูล"),e.readSampleData.push(n)):toastr.warning("การปรับปรุงผิดพลาด"+n,"การปรับปรุงผิดพลาด")})},e.modalData={},e.read=function(e,n){t.readSample(e).then(function(e){n(e)})},e.readAllSample=function(){t.readAllSample().then(function(n){"ERROR"!=n?e.readSampleData=n:toastr.warning("การอ่านข้อมูลผิดพลาด"+n,"การอ่านข้อมูลผิดพลาด")})},e.updateSample=function(){var n=e.currentID,r=e.currentIndex;t.updateSample(e.modalData,n).then(function(n){"ERROR"!=n?e.readSampleData[r]=e.modalData:toastr.warning("การปรับปรุงผิดพลาด"+n,"การปรับปรุงผิดพลาด")})},e.deleteConfirm=function(t,r){e.currentID=t,e.currentIndex=r,n({scope:e,template:"/views/sample/modal/sampleConfirm.html",show:!0})},e.deleteSample=function(){var n=e.currentID,r=e.currentIndex;t.deleteSample(n).then(function(n){"ERROR"!=n?e.readSampleData.splice(r,1):toastr.warning("การลบผิดพลาด"+n,"การลบผิดพลาด")})},e.checkData=function(){switch(e.modalMode){case"create":e.createNewSample();break;case"edit":e.updateSample()}},e.showSample=function(t,r,a){e.modalMode=t,e.currentID=r,e.currentIndex=a;var o=n({scope:e,template:"/views/sample/modal/sampleModal.html",show:!1});switch(t){case"create":e.modalData={},e.modalData.readOnly=!1,o.$promise.then(o.show);break;case"show":e.read(r,function(n){"ERROR"!=n?(o.$promise.then(o.show),e.modalData=n,e.modalData.bCreate=JSON.parse(n.bCreate),e.modalData.readOnly=!0):toastr.warning("การอ่านข้อมูลผิดพลาด"+n,"การอ่านข้อมูลผิดพลาด")});break;case"edit":e.read(r,function(n){"ERROR"!=n?(o.$promise.then(o.show),e.modalData=n,e.modalData.bCreate=JSON.parse(n.bCreate),e.modalData.readOnly=!1):toastr.warning("การอ่านข้อมูลผิดพลาด"+n,"การอ่านข้อมูลผิดพลาด")})}}}])}(),function(){app.factory("sampleService",["$http","$q",function(e,n){var t={};return t.createSample=function(){spinner.show();var t=n.defer();return e({method:"GET",url:"/sample/create",contentType:"application/json; charset=utf-8",dataType:"json",headers:{RequestVerificationToken:token}}).success(function(e){spinner.hide(),t.resolve(e)}).error(function(e){spinner.hide(),t.reject(e)}),t.promise},t.createNewSample=function(t){spinner.show();var r=n.defer();return e({method:"POST",url:"/sample/createnew",contentType:"application/json; charset=utf-8",data:{Name:t.Name,bCreate:t.bCreate},dataType:"json",headers:{RequestVerificationToken:token}}).success(function(e){spinner.hide(),r.resolve(e)}).error(function(e){spinner.hide(),r.reject(e)}),r.promise},t.readAllSample=function(){spinner.show();var t=n.defer();return e({method:"GET",url:"/sample/read",contentType:"application/json; charset=utf-8",dataType:"json",headers:{RequestVerificationToken:token}}).success(function(e){spinner.hide(),t.resolve(e)}).error(function(e){spinner.hide(),t.reject(e)}),t.promise},t.deleteSample=function(t){spinner.show();var r=n.defer();return e({method:"GET",url:"/sample/delete/"+t,contentType:"application/json; charset=utf-8",dataType:"json",headers:{RequestVerificationToken:token}}).success(function(e){spinner.hide(),r.resolve(e)}).error(function(e){spinner.hide(),r.reject(e)}),r.promise},t.readSample=function(t){spinner.show();var r=n.defer();return e({method:"GET",url:"/sample/read/"+t,contentType:"application/json; charset=utf-8",dataType:"json",headers:{RequestVerificationToken:token}}).success(function(e){spinner.hide(),r.resolve(e)}).error(function(e){spinner.hide(),r.reject(e)}),r.promise},t.updateSample=function(t,r){spinner.show();var a=n.defer();return e({method:"POST",url:"/sample/update/"+r,data:{Name:t.Name,bCreate:t.bCreate},contentType:"application/json; charset=utf-8",dataType:"json",headers:{RequestVerificationToken:token}}).success(function(e){spinner.hide(),a.resolve(e)}).error(function(e){spinner.hide(),a.reject(e)}),a.promise},t}])}(),function(){app.controller("scrubCtrl",["$scope","$modal","scrubService",function(e,n,t){e.Scrub={},e.setScrubDomain=function(){var e="C:/Users/itpbiw/Desktop/ScrubFile/scrubExport.txt";t.setScrubDomain(e).then(function(e){console.log(e)})}}])}(),function(){app.factory("scrubService",["$http","$q",function(e,n){var t={};return t.setScrubDomain=function(t){spinner.show();var r=n.defer();return e({method:"POST",url:"/scrub/setScrubDomain",contentType:"application/json; charset=utf-8",data:{filepath:t},dataType:"json",headers:{RequestVerificationToken:token}}).success(function(e){spinner.hide(),r.resolve(e)}).error(function(e){spinner.hide(),r.reject(e)}),r.promise},t}])}(),function(){app.factory("searchEngineService",["$http","$q",function(e,n){var t={};return t.addKeyword=function(t){spinner.show();var r=n.defer();return console.log(t),e({method:"POST",url:"/searchengine/addKeyword",contentType:"application/json; charset=utf-8",data:t,dataType:"json",headers:{RequestVerificationToken:token}}).success(function(e){spinner.hide(),r.resolve(e)}).error(function(e){spinner.hide(),r.reject(e)}),r.promise},t}])}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFsbGphdmFzY3JpcHQuanMiXSwibmFtZXMiOlsiYXBwIiwiYW5ndWxhciIsIm1vZHVsZSIsImNvbmZpZyIsIiRyb3V0ZVByb3ZpZGVyIiwiJGxvY2F0aW9uUHJvdmlkZXIiLCJodG1sNU1vZGUiLCJoYXNoUHJlZml4Iiwid2hlbiIsInRlbXBsYXRlVXJsIiwiY29udHJvbGxlciIsIm90aGVyd2lzZSIsInJlZGlyZWN0VG8iLCJzcGlubmVyIiwidG9rZW4iLCJ0b2FzdHIiLCJvcHRpb25zIiwiY2xvc2VCdXR0b24iLCJkZWJ1ZyIsInByb2dyZXNzQmFyIiwicG9zaXRpb25DbGFzcyIsIm9uY2xpY2siLCJzaG93RHVyYXRpb24iLCJoaWRlRHVyYXRpb24iLCJ0aW1lT3V0IiwiZXh0ZW5kZWRUaW1lT3V0Iiwic2hvd0Vhc2luZyIsImhpZGVFYXNpbmciLCJzaG93TWV0aG9kIiwiaGlkZU1ldGhvZCIsIm9wdFNwaW5lck1vZGFsIiwibGluZXMiLCJsZW5ndGgiLCJ3aWR0aCIsInJhZGl1cyIsImNvcm5lcnMiLCJyb3RhdGUiLCJjb2xvciIsInNwZWVkIiwidHJhaWwiLCJzaGFkb3ciLCJod2FjY2VsIiwiekluZGV4IiwidG9wIiwibGVmdCIsInNwaW5uZXJPYmoiLCJzaG93Iiwic3Bpbm5lcl9kaXYiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiU3Bpbm5lciIsInNwaW4iLCIkIiwiYmxvY2tVSSIsIm1lc3NhZ2UiLCJvdmVybGF5Q1NTIiwiYmFja2dyb3VuZENvbG9yIiwiaGlkZSIsInN0b3AiLCJ1bmJsb2NrVUkiLCIkc2NvcGUiLCJwYWdlRGF0YSIsIk5hbWUiLCJkaXJlY3RpdmVUZXN0IiwiZGlyZWN0aXZlIiwicmVzdHJpY3QiLCJyZXBsYWNlIiwicmVxdWlyZSIsInNjb3BlIiwibGluayIsImVsZW1lbnQiLCJhdHRyIiwibmdNb2RlbCIsIiRyZW5kZXIiLCJlbXB0eSIsImFwcGVuZCIsIiR2aWV3VmFsdWUiLCJEYXRlIiwicHJvdG90eXBlIiwiYWRkSG91cnMiLCJoIiwidGhpcyIsInNldEhvdXJzIiwiZ2V0SG91cnMiLCJmaWx0ZXIiLCJpbnB1dCIsIkRhdGVDYWwiLCJtYWluU2VydmljZSIsInNlYXJjaEVuZ2luZVNlcnZpY2UiLCJhY3RpdmVQYWdlIiwiaW5pdE1UIiwiR2V0U2FtcGxlIiwidGhlbiIsImRhdGEiLCJ0ZXN0RGF0YSIsIlN1Ym1pdEtleXdvcmQiLCJhZGRLZXl3b3JkIiwia2V5d29yZHMiLCJpbnB1dGtleXdvcmRzIiwicmVzdWx0IiwiY29uc29sZSIsImxvZyIsImZhY3RvcnkiLCIkaHR0cCIsIiRxIiwidGhpc2ZhY3QiLCJkZWZlciIsIm1ldGhvZCIsInVybCIsInN1Y2Nlc3MiLCJyZXNvbHZlIiwiZXJyb3IiLCJlcnIiLCJyZWplY3QiLCJwcm9taXNlIiwiJG1vZGFsIiwic2FtcGxlU2VydmljZSIsInJlYWRTYW1wbGVEYXRhIiwiY3JlYXRlU2FtcGxlIiwicHVzaCIsIndhcm5pbmciLCJjcmVhdGVOZXdTYW1wbGUiLCJtb2RhbERhdGEiLCJyZWFkIiwiaWQiLCJjYiIsInJlYWRTYW1wbGUiLCJyZWFkQWxsU2FtcGxlIiwidXBkYXRlU2FtcGxlIiwiY3VycmVudElEIiwiaW5kZXgiLCJjdXJyZW50SW5kZXgiLCJkZWxldGVDb25maXJtIiwidGVtcGxhdGUiLCJkZWxldGVTYW1wbGUiLCJzcGxpY2UiLCJjaGVja0RhdGEiLCJtb2RhbE1vZGUiLCJzaG93U2FtcGxlIiwidHlwZSIsIm15T3RoZXJNb2RhbCIsInJlYWRPbmx5IiwiJHByb21pc2UiLCJiQ3JlYXRlIiwiSlNPTiIsInBhcnNlIiwiY29udGVudFR5cGUiLCJkYXRhVHlwZSIsImhlYWRlcnMiLCJSZXF1ZXN0VmVyaWZpY2F0aW9uVG9rZW4iLCJvYmoiLCJzY3J1YlNlcnZpY2UiLCJTY3J1YiIsInNldFNjcnViRG9tYWluIiwiRmlsZXBhdGgiLCJmaWxlcGF0aCJdLCJtYXBwaW5ncyI6IkFBQUEsR0FBSUEsU0FDSixXQUNRQSxJQUFNQyxRQUFRQyxPQUFPLFdBQVks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YSxrQ0FDYnJELEtBQU9BLEVBQ1BzRCxTQUFVLE9BQ1ZDLFNBQ0lDLHlCQUE0QnZJLFNBRWpDK0YsUUFBUSxTQUFTaEIsR0FDaEJoRixRQUFRNEMsT0FDUmlELEVBQU1JLFFBQVFqQixLQUNma0IsTUFBTSxTQUFTbEIsR0FDZGhGLFFBQVE0QyxPQUNSaUQsRUFBTU8sT0FBT3BCLEtBRVZhLEVBQU1RLFNBR1ZUIiwiZmlsZSI6ImFsbGphdmFzY3JpcHQuanMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgYXBwID0ge307XG4oZnVuY3Rpb24oKSB7XG4gICAgICAgIGFwcCA9IGFuZ3VsYXIubW9kdWxlKFwiTWFpbkFwcFwiLCBbJ25nUm91dGUnLCAnbmdTYW5pdGl6ZScsICduZ1Jlc291cmNlJywgJ25nQW5pbWF0ZScsICdtZ2NyZWEubmdTdHJhcCddKTtcbiAgICAgICAgYXBwLmNvbmZpZyhmdW5jdGlvbiAoJHJvdXRlUHJvdmlkZXIsICRsb2NhdGlvblByb3ZpZGVyKSB7XG4gICAgICAgICAgICAkbG9jYXRpb25Qcm92aWRlci5odG1sNU1vZGUoZmFsc2UpLmhhc2hQcmVmaXgoJyEnKTtcbiAgICAgICAgICAgICRyb3V0ZVByb3ZpZGVyXG4gICAgICAgICAgICAud2hlbihcIi9cIix7XG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICcvdmlld3MvaW5kZXguaHRtbCcsIGNvbnRyb2xsZXI6ICdtYWluQ3RybCdcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAud2hlbihcIi9zYW1wbGVcIix7XG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICcvdmlld3Mvc2FtcGxlL3NhbXBsZS5odG1sJywgY29udHJvbGxlcjogJ3NhbXBsZUN0cmwnXG4gICAgICAgICAgICB9KS5vdGhlcndpc2Uoe1xuICAgICAgICAgICAgICAgIHJlZGlyZWN0VG86IFwiL1wiXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLndoZW4oXCIvc2NydWJcIix7XG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICcvdmlld3MvU2NydWJEb21haW4vc2NydWJkb21haW4uaHRtbCcsIGNvbnRyb2xsZXI6ICdzY3J1YkN0cmwnXG4gICAgICAgICAgICB9KS5vdGhlcndpc2Uoe1xuICAgICAgICAgICAgICAgIHJlZGlyZWN0VG86IFwiL1wiXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuKSgpO1xudmFyIHNwaW5uZXIgPSB7fTtcbnZhciB0b2tlbiA9IFwiWFhYXCI7XG4oZnVuY3Rpb24oKSB7XG4gICAgdG9hc3RyLm9wdGlvbnMgPSB7XG4gICAgICAgIFwiY2xvc2VCdXR0b25cIjogZmFsc2UsXG4gICAgICAgIFwiZGVidWdcIjogZmFsc2UsXG4gICAgICAgIFwicHJvZ3Jlc3NCYXJcIjogZmFsc2UsXG4gICAgICAgIFwicG9zaXRpb25DbGFzc1wiOiBcInRvYXN0LWJvdHRvbS1yaWdodFwiLFxuICAgICAgICBcIm9uY2xpY2tcIjogbnVsbCxcbiAgICAgICAgXCJzaG93RHVyYXRpb25cIjogXCIzMDBcIixcbiAgICAgICAgXCJoaWRlRHVyYXRpb25cIjogXCIxMDAwXCIsXG4gICAgICAgIFwidGltZU91dFwiOiBcIjUwMDBcIixcbiAgICAgICAgXCJleHRlbmRlZFRpbWVPdXRcIjogXCIxMDAwXCIsXG4gICAgICAgIFwic2hvd0Vhc2luZ1wiOiBcInN3aW5nXCIsXG4gICAgICAgIFwiaGlkZUVhc2luZ1wiOiBcImxpbmVhclwiLFxuICAgICAgICBcInNob3dNZXRob2RcIjogXCJmYWRlSW5cIixcbiAgICAgICAgXCJoaWRlTWV0aG9kXCI6IFwiZmFkZU91dFwiXG4gICAgfTtcbiAgICB2YXIgb3B0U3BpbmVyTW9kYWwgPSB7XG4gICAgICAgIGxpbmVzOiAxMSwgLy8gVGhlIG51bWJlciBvZiBsaW5lcyB0byBkcmF3XG4gICAgICAgIGxlbmd0aDogMjMsIC8vIFRoZSBsZW5ndGggb2YgZWFjaCBsaW5lXG4gICAgICAgIHdpZHRoOiA4LCAvLyBUaGUgbGluZSB0aGlja25lc3NcbiAgICAgICAgcmFkaXVzOiA0MCwgLy8gVGhlIHJhZGl1cyBvZiB0aGUgaW5uZXIgY2lyY2xlXG4gICAgICAgIGNvcm5lcnM6IDEsIC8vIENvcm5lciByb3VuZG5lc3MgKDAuLjEpXG4gICAgICAgIHJvdGF0ZTogOSwgLy8gVGhlIHJvdGF0aW9uIG9mZnNldFxuICAgICAgICBjb2xvcjogJyNGRkYnLCAvLyAjcmdiIG9yICNycmdnYmJcbiAgICAgICAgc3BlZWQ6IDEsIC8vIFJvdW5kcyBwZXIgc2Vjb25kXG4gICAgICAgIHRyYWlsOiA1MCwgLy8gQWZ0ZXJnbG93IHBlcmNlbnRhZ2VcbiAgICAgICAgc2hhZG93OiBmYWxzZSwgLy8gV2hldGhlciB0byByZW5kZXIgYSBzaGFkb3dcbiAgICAgICAgaHdhY2NlbDogdHJ1ZSwgLy8gV2hldGhlciB0byB1c2UgaGFyZHdhcmUgYWNjZWxlcmF0aW9uXG4gICAgICAgIC8vY2xhc3NOYW1lOiAnc3Bpbm5lcicsIC8vIFRoZSBDU1MgY2xhc3MgdG8gYXNzaWduIHRvIHRoZSBzcGlubmVyXG4gICAgICAgIHpJbmRleDogMmU5LCAvLyBUaGUgei1pbmRleCAoZGVmYXVsdHMgdG8gMjAwMDAwMDAwMClcbiAgICAgICAgdG9wOiAnNTAlJywgLy8gVG9wIHBvc2l0aW9uIHJlbGF0aXZlIHRvIHBhcmVudCBpbiBweFxuICAgICAgICBsZWZ0OiAnNTAlJyAvLyBMZWZ0IHBvc2l0aW9uIHJlbGF0aXZlIHRvIHBhcmVudCBpbiBweFxuICAgIH07XG5cbiAgICB2YXIgc3Bpbm5lck9iaiA9IG51bGw7XG4gICAgc3Bpbm5lci5zaG93ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgc3Bpbm5lcl9kaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3Bpbm5lcicpO1xuICAgICAgICBpZiAoc3Bpbm5lck9iaiA9PSBudWxsKSB7XG4gICAgICAgICAgICBzcGlubmVyT2JqID0gbmV3IFNwaW5uZXIob3B0U3BpbmVyTW9kYWwpLnNwaW4oc3Bpbm5lcl9kaXYpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc3Bpbm5lck9iai5zcGluKHNwaW5uZXJfZGl2KTtcbiAgICAgICAgfVxuICAgICAgICAkLmJsb2NrVUkoe21lc3NhZ2U6IG51bGwsIG92ZXJsYXlDU1M6IHtiYWNrZ3JvdW5kQ29sb3I6ICcjNWM1YzVjJ319KTtcbiAgICB9XG5cbiAgICBzcGlubmVyLmhpZGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBzcGlubmVyX2RpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzcGlubmVyJyk7XG4gICAgICAgIHNwaW5uZXJPYmouc3RvcChzcGlubmVyX2Rpdik7XG4gICAgICAgICQudW5ibG9ja1VJKCk7XG4gICAgfVxufSkoKTtcbihmdW5jdGlvbigpIHtcbiAgICBhcHAuY29udHJvbGxlcihcImdsb2JhbEN0cmxcIiwgZnVuY3Rpb24gKCRzY29wZSkge1xuICAgICAgICAkc2NvcGUucGFnZURhdGEgPSBbXG4gICAgICAgICAgICB7TmFtZTogJ0hvbWUnfSxcbiAgICAgICAgICAgIHtOYW1lOiAnU2FtcGxlJ31cbiAgICAgICAgXTtcbiAgICAgICAgJHNjb3BlLmRpcmVjdGl2ZVRlc3QgPSBcIkhFTExPIFdPUkxEXCI7XG4gICAgfSk7XG59KSgpO1xuKGZ1bmN0aW9uKCl7XG4gICAgYXBwLmRpcmVjdGl2ZSgnZGlyZWN0aXZlU2FtcGxlJyxmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHJlc3RyaWN0OiAnQUVDJyxcbiAgICAgICAgICAgIHJlcGxhY2U6IHRydWUsXG4gICAgICAgICAgICByZXF1aXJlOiAnbmdNb2RlbCcsXG4gICAgICAgICAgICBzY29wZTogdHJ1ZSxcbiAgICAgICAgICAgIC8vdGVtcGxhdGUgOiBcIlwiLFxuICAgICAgICAgICAgLy90ZW1wbGF0ZVVybCA6IFwiXCIsXG4gICAgICAgICAgICBsaW5rOiBmdW5jdGlvbiAoc2NvcGUsIGVsZW1lbnQsIGF0dHIsIG5nTW9kZWwpIHtcbiAgICAgICAgICAgICAgICBuZ01vZGVsLiRyZW5kZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuZW1wdHkoKTtcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5hcHBlbmQobmdNb2RlbC4kdmlld1ZhbHVlKTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSk7XG59KSgpO1xuKGZ1bmN0aW9uKCkge1xuICAgIERhdGUucHJvdG90eXBlLmFkZEhvdXJzPSBmdW5jdGlvbihoKXtcbiAgICAgICAgdGhpcy5zZXRIb3Vycyh0aGlzLmdldEhvdXJzKCkraCk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICBhcHAuZmlsdGVyKCdEYXRlVHJpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoaW5wdXQpIHtcbiAgICAgICAgICAgIGlmIChpbnB1dCAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHZhciBEYXRlQ2FsID0gaW5wdXQuYWRkSG91cnMoNyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIERhdGVDYWw7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiB7fTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pO1xufSkoKTtcbihmdW5jdGlvbigpe1xuICAgIGFwcC5jb250cm9sbGVyKCdtYWluQ3RybCcsIGZ1bmN0aW9uICgkc2NvcGUsbWFpblNlcnZpY2Usc2VhcmNoRW5naW5lU2VydmljZSkge1xuICAgICAgICAkc2NvcGUuYWN0aXZlUGFnZSA9IDE7IC8vIEhvbWVcbiAgICAgICAgJHNjb3BlLmluaXRNVCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgbWFpblNlcnZpY2UuR2V0U2FtcGxlKCkudGhlbihmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgICRzY29wZS50ZXN0RGF0YSA9IGRhdGE7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUuU3VibWl0S2V5d29yZCA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICBzZWFyY2hFbmdpbmVTZXJ2aWNlLmFkZEtleXdvcmQoe2tleXdvcmRzOiRzY29wZS5pbnB1dGtleXdvcmRzfSkudGhlbihmdW5jdGlvbihyZXN1bHQpe1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3VsdCk7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgfSk7XG59KSgpO1xuXG4oZnVuY3Rpb24oKXtcbiAgICBhcHAuZmFjdG9yeSgnbWFpblNlcnZpY2UnLCBmdW5jdGlvbiAoJGh0dHAsJHEpIHtcbiAgICAgICAgdmFyIHRoaXNmYWN0ID0ge307XG4gICAgICAgIHRoaXNmYWN0LkdldFNhbXBsZSA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICBzcGlubmVyLnNob3coKTtcbiAgICAgICAgICAgIHZhciBkZWZlciA9ICRxLmRlZmVyKCk7XG4gICAgICAgICAgICAkaHR0cCh7bWV0aG9kOiAnR0VUJywgdXJsOiAnL3NhbXBsZSd9KS5cbiAgICAgICAgICAgICAgICBzdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgc3Bpbm5lci5oaWRlKCk7XG4gICAgICAgICAgICAgICAgICAgIGRlZmVyLnJlc29sdmUoZGF0YSk7XG4gICAgICAgICAgICAgICAgfSkuXG4gICAgICAgICAgICAgICAgZXJyb3IoZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIHNwaW5uZXIuaGlkZSgpO1xuICAgICAgICAgICAgICAgICAgICBkZWZlci5yZWplY3QoZXJyKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBkZWZlci5wcm9taXNlO1xuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiB0aGlzZmFjdDtcblxuICAgIH0pO1xufSkoKTtcbihmdW5jdGlvbigpIHtcbiAgICBhcHAuY29udHJvbGxlcignc2FtcGxlQ3RybCcsIGZ1bmN0aW9uICgkc2NvcGUsICRtb2RhbCwgc2FtcGxlU2VydmljZSkge1xuICAgICAgICAkc2NvcGUuYWN0aXZlUGFnZSA9IDI7IC8vXCJTYW1wbGVcIjtcbiAgICAgICAgJHNjb3BlLnJlYWRTYW1wbGVEYXRhID0gW107XG5cbiAgICAgICAgLy8vLS0tLS0tLS0tLS0tIENyZWF0ZSBTZWN0aW9uIC0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAkc2NvcGUuY3JlYXRlU2FtcGxlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgc2FtcGxlU2VydmljZS5jcmVhdGVTYW1wbGUoKS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0ICE9IFwiRVJST1JcIikge1xuICAgICAgICAgICAgICAgICAgICB0b2FzdHIuc3VjY2Vzcygn4LiB4Liy4Lij4Lia4Lix4LiZ4LiX4Li24LiB4Liq4Liz4LmA4Lij4LmH4LiIJywgJ+C4geC4suC4o+C4muC4seC4meC4l+C4tuC4geC4guC5ieC4reC4oeC4ueC4pScpO1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUucmVhZFNhbXBsZURhdGEucHVzaChyZXN1bHQpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRvYXN0ci53YXJuaW5nKCfguIHguLLguKPguJrguLHguJnguJfguLbguIHguJzguLTguJTguJ7guKXguLLguJQnICsgcmVzdWx0LCAn4LiB4Liy4Lij4Lia4Lix4LiZ4LiX4Li24LiB4LiC4LmJ4Lit4Lih4Li54LilJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfTtcbiAgICAgICAgJHNjb3BlLmNyZWF0ZU5ld1NhbXBsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHNhbXBsZVNlcnZpY2UuY3JlYXRlTmV3U2FtcGxlKCRzY29wZS5tb2RhbERhdGEpLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQgIT0gXCJFUlJPUlwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHRvYXN0ci5zdWNjZXNzKCfguIHguLLguKPguJrguLHguJnguJfguLbguIHguKrguLPguYDguKPguYfguIgnLCAn4LiB4Liy4Lij4Lia4Lix4LiZ4LiX4Li24LiB4LiC4LmJ4Lit4Lih4Li54LilJyk7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5yZWFkU2FtcGxlRGF0YS5wdXNoKHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdG9hc3RyLndhcm5pbmcoJ+C4geC4suC4o+C4m+C4o+C4seC4muC4m+C4o+C4uOC4h+C4nOC4tOC4lOC4nuC4peC4suC4lCcgKyByZXN1bHQsICfguIHguLLguKPguJvguKPguLHguJrguJvguKPguLjguIfguJzguLTguJTguJ7guKXguLLguJQnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICAvLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbiAgICAgICAgLy8vLS0tLS0tLS0tLS0tLSBSZWFkIFNlY3Rpb24gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAkc2NvcGUubW9kYWxEYXRhID0ge307XG4gICAgICAgICRzY29wZS5yZWFkID0gZnVuY3Rpb24gKGlkLCBjYikge1xuICAgICAgICAgICAgc2FtcGxlU2VydmljZS5yZWFkU2FtcGxlKGlkKS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICBjYihyZXN1bHQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgJHNjb3BlLnJlYWRBbGxTYW1wbGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBzYW1wbGVTZXJ2aWNlLnJlYWRBbGxTYW1wbGUoKS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0ICE9IFwiRVJST1JcIikge1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUucmVhZFNhbXBsZURhdGEgPSByZXN1bHQ7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdG9hc3RyLndhcm5pbmcoJ+C4geC4suC4o+C4reC5iOC4suC4meC4guC5ieC4reC4oeC4ueC4peC4nOC4tOC4lOC4nuC4peC4suC4lCcgKyByZXN1bHQsICfguIHguLLguKPguK3guYjguLLguJnguILguYnguK3guKHguLnguKXguJzguLTguJTguJ7guKXguLLguJQnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICB9O1xuICAgICAgICAvLyBUT0RPIDogUGFnaW5hdGlvbiBTZXJ2ZXJzaWRlIFJlYWREYXRhXG5cbiAgICAgICAgLy8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG4gICAgICAgIC8vLy0tLS0tLS0tLS0tLS0gVXBkYXRlIFNlY3Rpb24gLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgJHNjb3BlLnVwZGF0ZVNhbXBsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBpZCA9ICRzY29wZS5jdXJyZW50SUQ7XG4gICAgICAgICAgICB2YXIgaW5kZXggPSAkc2NvcGUuY3VycmVudEluZGV4O1xuICAgICAgICAgICAgc2FtcGxlU2VydmljZS51cGRhdGVTYW1wbGUoJHNjb3BlLm1vZGFsRGF0YSwgaWQpLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQgIT0gXCJFUlJPUlwiKSB7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5yZWFkU2FtcGxlRGF0YVtpbmRleF0gPSAkc2NvcGUubW9kYWxEYXRhO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRvYXN0ci53YXJuaW5nKCfguIHguLLguKPguJvguKPguLHguJrguJvguKPguLjguIfguJzguLTguJTguJ7guKXguLLguJQnICsgcmVzdWx0LCAn4LiB4Liy4Lij4Lib4Lij4Lix4Lia4Lib4Lij4Li44LiH4Lic4Li04LiU4Lie4Lil4Liy4LiUJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICAvLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbiAgICAgICAgLy8vLS0tLS0tLS0tLS0tLSBEZWxldGUgU2VjdGlvbiAtLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAkc2NvcGUuZGVsZXRlQ29uZmlybSA9IGZ1bmN0aW9uIChpZCwgaW5kZXgpIHtcbiAgICAgICAgICAgICRzY29wZS5jdXJyZW50SUQgPSBpZDtcbiAgICAgICAgICAgICRzY29wZS5jdXJyZW50SW5kZXggPSBpbmRleDtcbiAgICAgICAgICAgICRtb2RhbCh7c2NvcGU6ICRzY29wZSwgdGVtcGxhdGU6ICcvdmlld3Mvc2FtcGxlL21vZGFsL3NhbXBsZUNvbmZpcm0uaHRtbCcsIHNob3c6IHRydWV9KTtcbiAgICAgICAgfTtcbiAgICAgICAgJHNjb3BlLmRlbGV0ZVNhbXBsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBpZCA9ICRzY29wZS5jdXJyZW50SUQ7XG4gICAgICAgICAgICB2YXIgaW5kZXggPSAkc2NvcGUuY3VycmVudEluZGV4O1xuXG4gICAgICAgICAgICBzYW1wbGVTZXJ2aWNlLmRlbGV0ZVNhbXBsZShpZCkudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdCAhPSBcIkVSUk9SXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnJlYWRTYW1wbGVEYXRhLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdG9hc3RyLndhcm5pbmcoJ+C4geC4suC4o+C4peC4muC4nOC4tOC4lOC4nuC4peC4suC4lCcgKyByZXN1bHQsICfguIHguLLguKPguKXguJrguJzguLTguJTguJ7guKXguLLguJQnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICB9O1xuICAgICAgICAvLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbiAgICAgICAgLy8vLS0tLS0tLS0tLS0tLS0gT3RoZXIgU2VjdGlvbiAtLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAkc2NvcGUuY2hlY2tEYXRhID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgc3dpdGNoICgkc2NvcGUubW9kYWxNb2RlKSB7XG4gICAgICAgICAgICAgICAgY2FzZSBcImNyZWF0ZVwiIDpcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmNyZWF0ZU5ld1NhbXBsZSgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwiZWRpdFwiIDpcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnVwZGF0ZVNhbXBsZSgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAkc2NvcGUuc2hvd1NhbXBsZSA9IGZ1bmN0aW9uICh0eXBlLCBpZCwgaW5kZXgpIHtcbiAgICAgICAgICAgICRzY29wZS5tb2RhbE1vZGUgPSB0eXBlO1xuICAgICAgICAgICAgJHNjb3BlLmN1cnJlbnRJRCA9IGlkO1xuICAgICAgICAgICAgJHNjb3BlLmN1cnJlbnRJbmRleCA9IGluZGV4O1xuICAgICAgICAgICAgdmFyIG15T3RoZXJNb2RhbCA9ICRtb2RhbCh7c2NvcGU6ICRzY29wZSwgdGVtcGxhdGU6ICcvdmlld3Mvc2FtcGxlL21vZGFsL3NhbXBsZU1vZGFsLmh0bWwnLCBzaG93OiBmYWxzZX0pO1xuXG4gICAgICAgICAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgICAgICAgICBjYXNlICdjcmVhdGUnIDpcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLm1vZGFsRGF0YSA9IHt9O1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUubW9kYWxEYXRhLnJlYWRPbmx5ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIG15T3RoZXJNb2RhbC4kcHJvbWlzZS50aGVuKG15T3RoZXJNb2RhbC5zaG93KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnc2hvdycgOlxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUucmVhZChpZCwgZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdCAhPSBcIkVSUk9SXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBteU90aGVyTW9kYWwuJHByb21pc2UudGhlbihteU90aGVyTW9kYWwuc2hvdyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLm1vZGFsRGF0YSA9IHJlc3VsdDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUubW9kYWxEYXRhLmJDcmVhdGUgPSBKU09OLnBhcnNlKHJlc3VsdC5iQ3JlYXRlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUubW9kYWxEYXRhLnJlYWRPbmx5ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9hc3RyLndhcm5pbmcoJ+C4geC4suC4o+C4reC5iOC4suC4meC4guC5ieC4reC4oeC4ueC4peC4nOC4tOC4lOC4nuC4peC4suC4lCcgKyByZXN1bHQsICfguIHguLLguKPguK3guYjguLLguJnguILguYnguK3guKHguLnguKXguJzguLTguJTguJ7guKXguLLguJQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnZWRpdCcgOlxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUucmVhZChpZCwgZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdCAhPSBcIkVSUk9SXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBteU90aGVyTW9kYWwuJHByb21pc2UudGhlbihteU90aGVyTW9kYWwuc2hvdyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLm1vZGFsRGF0YSA9IHJlc3VsdDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUubW9kYWxEYXRhLmJDcmVhdGUgPSBKU09OLnBhcnNlKHJlc3VsdC5iQ3JlYXRlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUubW9kYWxEYXRhLnJlYWRPbmx5ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvYXN0ci53YXJuaW5nKCfguIHguLLguKPguK3guYjguLLguJnguILguYnguK3guKHguLnguKXguJzguLTguJTguJ7guKXguLLguJQnICsgcmVzdWx0LCAn4LiB4Liy4Lij4Lit4LmI4Liy4LiZ4LiC4LmJ4Lit4Lih4Li54Lil4Lic4Li04LiU4Lie4Lil4Liy4LiUJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgLy8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgIH0pO1xufSkoKTtcblxuKGZ1bmN0aW9uKCl7XG4gICAgYXBwLmZhY3RvcnkoJ3NhbXBsZVNlcnZpY2UnLCBmdW5jdGlvbiAoJGh0dHAsJHEpIHtcbiAgICAgICAgdmFyIHRoaXNmYWN0ID0ge307XG4gICAgICAgIHRoaXNmYWN0LmNyZWF0ZVNhbXBsZSA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICBzcGlubmVyLnNob3coKTtcbiAgICAgICAgICAgIHZhciBkZWZlciA9ICRxLmRlZmVyKCk7XG4gICAgICAgICAgICAgICAgJGh0dHAoe1xuICAgICAgICAgICAgICAgICAgICBtZXRob2Q6IFwiR0VUXCIsXG4gICAgICAgICAgICAgICAgICAgIHVybDogJy9zYW1wbGUvY3JlYXRlJyxcbiAgICAgICAgICAgICAgICAgICAgY29udGVudFR5cGU6ICdhcHBsaWNhdGlvbi9qc29uOyBjaGFyc2V0PXV0Zi04JyxcbiAgICAgICAgICAgICAgICAgICAgZGF0YVR5cGU6ICdqc29uJyxcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgJ1JlcXVlc3RWZXJpZmljYXRpb25Ub2tlbic6IHRva2VuXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgc3Bpbm5lci5oaWRlKCk7XG4gICAgICAgICAgICAgICAgICAgIGRlZmVyLnJlc29sdmUoZGF0YSk7XG4gICAgICAgICAgICAgICAgfSkuZXJyb3IoZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICBzcGlubmVyLmhpZGUoKTtcbiAgICAgICAgICAgICAgICAgICAgZGVmZXIucmVqZWN0KGRhdGEpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIGRlZmVyLnByb21pc2U7XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpc2ZhY3QuY3JlYXRlTmV3U2FtcGxlID0gZnVuY3Rpb24ob2JqKXtcbiAgICAgICAgICAgIHNwaW5uZXIuc2hvdygpO1xuICAgICAgICAgICAgdmFyIGRlZmVyID0gJHEuZGVmZXIoKTtcbiAgICAgICAgICAgICRodHRwKHtcbiAgICAgICAgICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICAgICAgICAgIHVybDogJy9zYW1wbGUvY3JlYXRlbmV3JyxcbiAgICAgICAgICAgICAgICBjb250ZW50VHlwZTogJ2FwcGxpY2F0aW9uL2pzb247IGNoYXJzZXQ9dXRmLTgnLFxuICAgICAgICAgICAgICAgIGRhdGE6IHsgTmFtZTogb2JqLk5hbWUsIGJDcmVhdGU6IG9iai5iQ3JlYXRlfSxcbiAgICAgICAgICAgICAgICBkYXRhVHlwZTogJ2pzb24nLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgJ1JlcXVlc3RWZXJpZmljYXRpb25Ub2tlbic6IHRva2VuXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSkuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgc3Bpbm5lci5oaWRlKCk7XG4gICAgICAgICAgICAgICAgZGVmZXIucmVzb2x2ZShkYXRhKTtcbiAgICAgICAgICAgIH0pLmVycm9yKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICBzcGlubmVyLmhpZGUoKTtcbiAgICAgICAgICAgICAgICBkZWZlci5yZWplY3QoZGF0YSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBkZWZlci5wcm9taXNlO1xuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXNmYWN0LnJlYWRBbGxTYW1wbGUgPSBmdW5jdGlvbigpe1xuICAgICAgICAgICAgc3Bpbm5lci5zaG93KCk7XG4gICAgICAgICAgICB2YXIgZGVmZXIgPSAkcS5kZWZlcigpO1xuICAgICAgICAgICAgICAgICRodHRwKFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgICAgICAgICAgICAgICAgdXJsOiAnL3NhbXBsZS9yZWFkJyxcbiAgICAgICAgICAgICAgICAgICAgY29udGVudFR5cGU6ICdhcHBsaWNhdGlvbi9qc29uOyBjaGFyc2V0PXV0Zi04JyxcbiAgICAgICAgICAgICAgICAgICAgZGF0YVR5cGU6ICdqc29uJyxcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgJ1JlcXVlc3RWZXJpZmljYXRpb25Ub2tlbic6IHRva2VuXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgc3Bpbm5lci5oaWRlKCk7XG4gICAgICAgICAgICAgICAgICAgIGRlZmVyLnJlc29sdmUoZGF0YSk7XG4gICAgICAgICAgICAgICAgfSkuZXJyb3IoZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICBzcGlubmVyLmhpZGUoKTtcbiAgICAgICAgICAgICAgICAgICAgZGVmZXIucmVqZWN0KGRhdGEpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIGRlZmVyLnByb21pc2U7XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpc2ZhY3QuZGVsZXRlU2FtcGxlID0gZnVuY3Rpb24oaWQpe1xuICAgICAgICAgICAgc3Bpbm5lci5zaG93KCk7XG4gICAgICAgICAgICB2YXIgZGVmZXIgPSAkcS5kZWZlcigpO1xuICAgICAgICAgICAgICAgICRodHRwKHtcbiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgICAgICAgICAgICAgICAgdXJsOiAnL3NhbXBsZS9kZWxldGUvJytpZCxcbiAgICAgICAgICAgICAgICAgICAgY29udGVudFR5cGU6ICdhcHBsaWNhdGlvbi9qc29uOyBjaGFyc2V0PXV0Zi04JyxcbiAgICAgICAgICAgICAgICAgICAgZGF0YVR5cGU6ICdqc29uJyxcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgJ1JlcXVlc3RWZXJpZmljYXRpb25Ub2tlbic6IHRva2VuXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgc3Bpbm5lci5oaWRlKCk7XG4gICAgICAgICAgICAgICAgICAgIGRlZmVyLnJlc29sdmUoZGF0YSk7XG4gICAgICAgICAgICAgICAgfSkuZXJyb3IoZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICBzcGlubmVyLmhpZGUoKTtcbiAgICAgICAgICAgICAgICAgICAgZGVmZXIucmVqZWN0KGRhdGEpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIGRlZmVyLnByb21pc2U7XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpc2ZhY3QucmVhZFNhbXBsZSA9IGZ1bmN0aW9uKGlkKXtcbiAgICAgICAgICAgIHNwaW5uZXIuc2hvdygpO1xuICAgICAgICAgICAgdmFyIGRlZmVyID0gJHEuZGVmZXIoKTtcbiAgICAgICAgICAgICAgICAkaHR0cCh7XG4gICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICAgICAgICAgICAgICAgIHVybDogJy9zYW1wbGUvcmVhZC8nK2lkLFxuICAgICAgICAgICAgICAgICAgICBjb250ZW50VHlwZTogJ2FwcGxpY2F0aW9uL2pzb247IGNoYXJzZXQ9dXRmLTgnLFxuICAgICAgICAgICAgICAgICAgICBkYXRhVHlwZTogJ2pzb24nLFxuICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAnUmVxdWVzdFZlcmlmaWNhdGlvblRva2VuJzogdG9rZW5cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICBzcGlubmVyLmhpZGUoKTtcbiAgICAgICAgICAgICAgICAgICAgZGVmZXIucmVzb2x2ZShkYXRhKTtcbiAgICAgICAgICAgICAgICB9KS5lcnJvcihmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIHNwaW5uZXIuaGlkZSgpO1xuICAgICAgICAgICAgICAgICAgICBkZWZlci5yZWplY3QoZGF0YSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gZGVmZXIucHJvbWlzZTtcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzZmFjdC51cGRhdGVTYW1wbGUgPSBmdW5jdGlvbihvYmosaWQpe1xuICAgICAgICAgICAgc3Bpbm5lci5zaG93KCk7XG4gICAgICAgICAgICB2YXIgZGVmZXIgPSAkcS5kZWZlcigpO1xuICAgICAgICAgICAgICAgICRodHRwKHtcbiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgICAgICAgICAgICAgdXJsOiAnL3NhbXBsZS91cGRhdGUvJytpZCxcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogeyBOYW1lOiBvYmouTmFtZSwgYkNyZWF0ZTogb2JqLmJDcmVhdGV9LFxuICAgICAgICAgICAgICAgICAgICBjb250ZW50VHlwZTogJ2FwcGxpY2F0aW9uL2pzb247IGNoYXJzZXQ9dXRmLTgnLFxuICAgICAgICAgICAgICAgICAgICBkYXRhVHlwZTogJ2pzb24nLFxuICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAnUmVxdWVzdFZlcmlmaWNhdGlvblRva2VuJzogdG9rZW5cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICBzcGlubmVyLmhpZGUoKTtcbiAgICAgICAgICAgICAgICAgICAgZGVmZXIucmVzb2x2ZShkYXRhKTtcbiAgICAgICAgICAgICAgICB9KS5lcnJvcihmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIHNwaW5uZXIuaGlkZSgpO1xuICAgICAgICAgICAgICAgICAgICBkZWZlci5yZWplY3QoZGF0YSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gZGVmZXIucHJvbWlzZTtcbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4gdGhpc2ZhY3Q7XG5cbiAgICB9KTtcbn0pKCk7XG4oZnVuY3Rpb24oKSB7XG4gICAgYXBwLmNvbnRyb2xsZXIoJ3NjcnViQ3RybCcsIGZ1bmN0aW9uICgkc2NvcGUsICRtb2RhbCwgc2NydWJTZXJ2aWNlKSB7XG5cbiAgICAgICAgJHNjb3BlLlNjcnViID17fTtcbiAgICAgICAgJHNjb3BlLnNldFNjcnViRG9tYWluID0gZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIHZhciBGaWxlcGF0aCA9IFwiQzovVXNlcnMvaXRwYml3L0Rlc2t0b3AvU2NydWJGaWxlL3NjcnViRXhwb3J0LnR4dFwiO1xuICAgICAgICAgICAgc2NydWJTZXJ2aWNlLnNldFNjcnViRG9tYWluKEZpbGVwYXRoKS50aGVuKGZ1bmN0aW9uKGZpbGVwYXRoKXtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhmaWxlcGF0aCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICB9KTtcbn0pKCk7XG5cbihmdW5jdGlvbigpe1xuICAgIGFwcC5mYWN0b3J5KCdzY3J1YlNlcnZpY2UnLCBmdW5jdGlvbiAoJGh0dHAsJHEpIHtcbiAgICAgICAgdmFyIHRoaXNmYWN0ID0ge307XG5cbiAgICAgICAgdGhpc2ZhY3Quc2V0U2NydWJEb21haW4gPSBmdW5jdGlvbihvYmope1xuICAgICAgICAgICAgc3Bpbm5lci5zaG93KCk7XG4gICAgICAgICAgICB2YXIgZGVmZXIgPSAkcS5kZWZlcigpO1xuICAgICAgICAgICAgJGh0dHAoe1xuICAgICAgICAgICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgICAgICAgICAgdXJsOiAnL3NjcnViL3NldFNjcnViRG9tYWluJyxcbiAgICAgICAgICAgICAgICBjb250ZW50VHlwZTogJ2FwcGxpY2F0aW9uL2pzb247IGNoYXJzZXQ9dXRmLTgnLFxuICAgICAgICAgICAgICAgIGRhdGE6IHsgZmlsZXBhdGg6IG9ian0sXG4gICAgICAgICAgICAgICAgZGF0YVR5cGU6ICdqc29uJyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgICAgICdSZXF1ZXN0VmVyaWZpY2F0aW9uVG9rZW4nOiB0b2tlblxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgIHNwaW5uZXIuaGlkZSgpO1xuICAgICAgICAgICAgICAgIGRlZmVyLnJlc29sdmUoZGF0YSk7XG4gICAgICAgICAgICB9KS5lcnJvcihmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgc3Bpbm5lci5oaWRlKCk7XG4gICAgICAgICAgICAgICAgZGVmZXIucmVqZWN0KGRhdGEpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gZGVmZXIucHJvbWlzZTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIHRoaXNmYWN0O1xuXG4gICAgfSk7XG59KSgpO1xuKGZ1bmN0aW9uKCl7XG4gICAgYXBwLmZhY3RvcnkoJ3NlYXJjaEVuZ2luZVNlcnZpY2UnLCBmdW5jdGlvbiAoJGh0dHAsJHEpIHtcbiAgICAgICAgdmFyIHRoaXNmYWN0ID0ge307XG4gICAgICAgIHRoaXNmYWN0LmFkZEtleXdvcmQgPSBmdW5jdGlvbihkYXRhKXtcbiAgICAgICAgICAgIHNwaW5uZXIuc2hvdygpO1xuICAgICAgICAgICAgdmFyIGRlZmVyID0gJHEuZGVmZXIoKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpO1xuICAgICAgICAgICAgJGh0dHAoe1xuICAgICAgICAgICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgICAgICAgICAgdXJsOiAnL3NlYXJjaGVuZ2luZS9hZGRLZXl3b3JkJyxcbiAgICAgICAgICAgICAgICBjb250ZW50VHlwZTogJ2FwcGxpY2F0aW9uL2pzb247IGNoYXJzZXQ9dXRmLTgnLFxuICAgICAgICAgICAgICAgIGRhdGEgOiBkYXRhLFxuICAgICAgICAgICAgICAgIGRhdGFUeXBlOiAnanNvbicsXG4gICAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICAgICAnUmVxdWVzdFZlcmlmaWNhdGlvblRva2VuJzogdG9rZW5cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICBzcGlubmVyLmhpZGUoKTtcbiAgICAgICAgICAgICAgICBkZWZlci5yZXNvbHZlKGRhdGEpO1xuICAgICAgICAgICAgfSkuZXJyb3IoZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgIHNwaW5uZXIuaGlkZSgpO1xuICAgICAgICAgICAgICAgIGRlZmVyLnJlamVjdChkYXRhKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIGRlZmVyLnByb21pc2U7XG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIHRoaXNmYWN0O1xuICAgIH0pO1xufSkoKTsiXX0=
