var app={};!function(){app=angular.module("MainApp",["ngRoute","ngSanitize","ngResource","ngAnimate","mgcrea.ngStrap","firebase"]),app.config(["$routeProvider","$locationProvider",function(e,n){n.html5Mode(!1).hashPrefix("!"),e.when("/",{templateUrl:"/views/index.html",controller:"mainCtrl"}).when("/sample",{templateUrl:"/views/sample/sample.html",controller:"sampleCtrl"}).otherwise({redirectTo:"/"}).when("/scrub",{templateUrl:"/views/ScrubDomain/scrubdomain.html",controller:"scrubCtrl"}).otherwise({redirectTo:"/"})}])}();var spinner={},token="XXX";!function(){toastr.options={closeButton:!1,debug:!1,progressBar:!1,positionClass:"toast-bottom-right",onclick:null,showDuration:"300",hideDuration:"1000",timeOut:"5000",extendedTimeOut:"1000",showEasing:"swing",hideEasing:"linear",showMethod:"fadeIn",hideMethod:"fadeOut"};var e={lines:11,length:23,width:8,radius:40,corners:1,rotate:9,color:"#FFF",speed:1,trail:50,shadow:!1,hwaccel:!0,zIndex:2e9,top:"50%",left:"50%"},n=null;spinner.show=function(){var t=document.getElementById("spinner");null==n?n=new Spinner(e).spin(t):n.spin(t),$.blockUI({message:null,overlayCSS:{backgroundColor:"#5c5c5c"}})},spinner.hide=function(){var e=document.getElementById("spinner");n.stop(e),$.unblockUI()}}(),function(){app.controller("globalCtrl",["$scope",function(e){e.pageData=[{Name:"Home"},{Name:"Sample"}],e.directiveTest="HELLO WORLD"}])}(),function(){app.directive("directiveSample",function(){return{restrict:"AEC",replace:!0,require:"ngModel",scope:!0,link:function(e,n,t,r){r.$render=function(){n.empty(),n.append(r.$viewValue)}}}})}(),function(){Date.prototype.addHours=function(e){return this.setHours(this.getHours()+e),this},app.filter("DateTrick",function(){return function(e){if(null!==e){var n=e.addHours(7);return n}return{}}})}(),function(){app.controller("mainCtrl",["$scope","$firebaseObject","$firebaseArray","$firebaseAuth","mainService","searchEngineService",function(e,n,t,r,a,o){e.activePage=1,e.text=[],e.message="",e.initMT=function(){var n={apiKey:"AIzaSyAbClNhb0PEnFUvx7ViemGcOB268uRaNq8",authDomain:"chat-f9c5e.firebaseapp.com",databaseURL:"https://chat-f9c5e.firebaseio.com",storageBucket:"chat-f9c5e.appspot.com",messagingSenderId:"303533600371"};firebase.initializeApp(n),e.ref=firebase.database().ref().child("chat-f9c5e"),e.list=t(e.ref),e.list.$loaded().then(function(n){console.log("Meaasge:",n),e.message=n})["catch"](function(e){console.log("Error:",e)})},e.SubmitKeyword=function(){o.addKeyword({keywords:e.inputkeywords}).then(function(e){console.log(e)})},e.Submit=function(n){e.list.$add({message:n}).then(function(e){console.log("values: ",e)})}}])}(),function(){app.factory("mainService",["$http","$q",function(e,n){var t={};return t.GetSample=function(){spinner.show();var t=n.defer();return e({method:"GET",url:"/"}).success(function(e){spinner.hide(),t.resolve(e)}).error(function(e){spinner.hide(),t.reject(e)}),t.promise},t}])}(),function(){app.controller("sampleCtrl",["$scope","$modal","sampleService",function(e,n,t){e.activePage=2,e.readSampleData=[],e.createSample=function(){t.createSample().then(function(n){"ERROR"!=n?(toastr.success("การบันทึกสำเร็จ","การบันทึกข้อมูล"),e.readSampleData.push(n)):toastr.warning("การบันทึกผิดพลาด"+n,"การบันทึกข้อมูล")})},e.createNewSample=function(){t.createNewSample(e.modalData).then(function(n){"ERROR"!=n?(toastr.success("การบันทึกสำเร็จ","การบันทึกข้อมูล"),e.readSampleData.push(n)):toastr.warning("การปรับปรุงผิดพลาด"+n,"การปรับปรุงผิดพลาด")})},e.modalData={},e.read=function(e,n){t.readSample(e).then(function(e){n(e)})},e.readAllSample=function(){t.readAllSample().then(function(n){"ERROR"!=n?e.readSampleData=n:toastr.warning("การอ่านข้อมูลผิดพลาด"+n,"การอ่านข้อมูลผิดพลาด")})},e.updateSample=function(){var n=e.currentID,r=e.currentIndex;t.updateSample(e.modalData,n).then(function(n){"ERROR"!=n?e.readSampleData[r]=e.modalData:toastr.warning("การปรับปรุงผิดพลาด"+n,"การปรับปรุงผิดพลาด")})},e.deleteConfirm=function(t,r){e.currentID=t,e.currentIndex=r,n({scope:e,template:"/views/sample/modal/sampleConfirm.html",show:!0})},e.deleteSample=function(){var n=e.currentID,r=e.currentIndex;t.deleteSample(n).then(function(n){"ERROR"!=n?e.readSampleData.splice(r,1):toastr.warning("การลบผิดพลาด"+n,"การลบผิดพลาด")})},e.checkData=function(){switch(e.modalMode){case"create":e.createNewSample();break;case"edit":e.updateSample()}},e.showSample=function(t,r,a){e.modalMode=t,e.currentID=r,e.currentIndex=a;var o=n({scope:e,template:"/views/sample/modal/sampleModal.html",show:!1});switch(t){case"create":e.modalData={},e.modalData.readOnly=!1,o.$promise.then(o.show);break;case"show":e.read(r,function(n){"ERROR"!=n?(o.$promise.then(o.show),e.modalData=n,e.modalData.bCreate=JSON.parse(n.bCreate),e.modalData.readOnly=!0):toastr.warning("การอ่านข้อมูลผิดพลาด"+n,"การอ่านข้อมูลผิดพลาด")});break;case"edit":e.read(r,function(n){"ERROR"!=n?(o.$promise.then(o.show),e.modalData=n,e.modalData.bCreate=JSON.parse(n.bCreate),e.modalData.readOnly=!1):toastr.warning("การอ่านข้อมูลผิดพลาด"+n,"การอ่านข้อมูลผิดพลาด")})}}}])}(),function(){app.factory("sampleService",["$http","$q",function(e,n){var t={};return t.createSample=function(){spinner.show();var t=n.defer();return e({method:"GET",url:"/sample/create",contentType:"application/json; charset=utf-8",dataType:"json",headers:{RequestVerificationToken:token}}).success(function(e){spinner.hide(),t.resolve(e)}).error(function(e){spinner.hide(),t.reject(e)}),t.promise},t.createNewSample=function(t){spinner.show();var r=n.defer();return e({method:"POST",url:"/sample/createnew",contentType:"application/json; charset=utf-8",data:{Name:t.Name,bCreate:t.bCreate},dataType:"json",headers:{RequestVerificationToken:token}}).success(function(e){spinner.hide(),r.resolve(e)}).error(function(e){spinner.hide(),r.reject(e)}),r.promise},t.readAllSample=function(){spinner.show();var t=n.defer();return e({method:"GET",url:"/sample/read",contentType:"application/json; charset=utf-8",dataType:"json",headers:{RequestVerificationToken:token}}).success(function(e){spinner.hide(),t.resolve(e)}).error(function(e){spinner.hide(),t.reject(e)}),t.promise},t.deleteSample=function(t){spinner.show();var r=n.defer();return e({method:"GET",url:"/sample/delete/"+t,contentType:"application/json; charset=utf-8",dataType:"json",headers:{RequestVerificationToken:token}}).success(function(e){spinner.hide(),r.resolve(e)}).error(function(e){spinner.hide(),r.reject(e)}),r.promise},t.readSample=function(t){spinner.show();var r=n.defer();return e({method:"GET",url:"/sample/read/"+t,contentType:"application/json; charset=utf-8",dataType:"json",headers:{RequestVerificationToken:token}}).success(function(e){spinner.hide(),r.resolve(e)}).error(function(e){spinner.hide(),r.reject(e)}),r.promise},t.updateSample=function(t,r){spinner.show();var a=n.defer();return e({method:"POST",url:"/sample/update/"+r,data:{Name:t.Name,bCreate:t.bCreate},contentType:"application/json; charset=utf-8",dataType:"json",headers:{RequestVerificationToken:token}}).success(function(e){spinner.hide(),a.resolve(e)}).error(function(e){spinner.hide(),a.reject(e)}),a.promise},t}])}(),function(){app.controller("scrubCtrl",["$scope","$modal","scrubService",function(e,n,t){e.Scrub={},e.setScrubDomain=function(){var e="C:/Users/itpbiw/Desktop/ScrubFile/scrubExport.txt";t.setScrubDomain(e).then(function(e){console.log(e)})}}])}(),function(){app.factory("scrubService",["$http","$q",function(e,n){var t={};return t.setScrubDomain=function(t){spinner.show();var r=n.defer();return e({method:"POST",url:"/scrub/setScrubDomain",contentType:"application/json; charset=utf-8",data:{filepath:t},dataType:"json",headers:{RequestVerificationToken:token}}).success(function(e){spinner.hide(),r.resolve(e)}).error(function(e){spinner.hide(),r.reject(e)}),r.promise},t}])}(),function(){app.factory("searchEngineService",["$http","$q",function(e,n){var t={};return t.addKeyword=function(t){spinner.show();var r=n.defer();return console.log(t),e({method:"POST",url:"/searchengine/addKeyword",contentType:"application/json; charset=utf-8",data:t,dataType:"json",headers:{RequestVerificationToken:token}}).success(function(e){spinner.hide(),r.resolve(e)}).error(function(e){spinner.hide(),r.reject(e)}),r.promise},t}])}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFsbGphdmFzY3JpcHQuanMiXSwibmFtZXMiOlsiYXBwIiwiYW5ndWxhciIsIm1vZHVsZSIsImNvbmZpZyIsIiRyb3V0ZVByb3ZpZGVyIiwiJGxvY2F0aW9uUHJvdmlkZXIiLCJodG1sNU1vZGUiLCJoYXNoUHJlZml4Iiwid2hlbiIsInRlbXBsYXRlVXJsIiwiY29udHJvbGxlciIsIm90aGVyd2lzZSIsInJlZGlyZWN0VG8iLCJzcGlubmVyIiwidG9rZW4iLCJ0b2FzdHIiLCJvcHRpb25zIiwiY2xvc2VCdXR0b24iLCJkZWJ1ZyIsInByb2dyZXNzQmFyIiwicG9zaXRpb25DbGFzcyIsIm9uY2xpY2siLCJzaG93RHVyYXRpb24iLCJoaWRlRHVyYXRpb24iLCJ0aW1lT3V0IiwiZXh0ZW5kZWRUaW1lT3V0Iiwic2hvd0Vhc2luZyIsImhpZGVFYXNpbmciLCJzaG93TWV0aG9kIiwiaGlkZU1ldGhvZCIsIm9wdFNwaW5lck1vZGFsIiwibGluZXMiLCJsZW5ndGgiLCJ3aWR0aCIsInJhZGl1cyIsImNvcm5lcnMiLCJyb3RhdGUiLCJjb2xvciIsInNwZWVkIiwidHJhaWwiLCJzaGFkb3ciLCJod2FjY2VsIiwiekluZGV4IiwidG9wIiwibGVmdCIsInNwaW5uZXJPYmoiLCJzaG93Iiwic3Bpbm5lcl9kaXYiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiU3Bpbm5lciIsInNwaW4iLCIkIiwiYmxvY2tVSSIsIm1lc3NhZ2UiLCJvdmVybGF5Q1NTIiwiYmFja2dyb3VuZENvbG9yIiwiaGlkZSIsInN0b3AiLCJ1bmJsb2NrVUkiLCIkc2NvcGUiLCJwYWdlRGF0YSIsIk5hbWUiLCJkaXJlY3RpdmVUZXN0IiwiZGlyZWN0aXZlIiwicmVzdHJpY3QiLCJyZXBsYWNlIiwicmVxdWlyZSIsInNjb3BlIiwibGluayIsImVsZW1lbnQiLCJhdHRyIiwibmdNb2RlbCIsIiRyZW5kZXIiLCJlbXB0eSIsImFwcGVuZCIsIiR2aWV3VmFsdWUiLCJEYXRlIiwicHJvdG90eXBlIiwiYWRkSG91cnMiLCJoIiwidGhpcyIsInNldEhvdXJzIiwiZ2V0SG91cnMiLCJmaWx0ZXIiLCJpbnB1dCIsIkRhdGVDYWwiLCIkZmlyZWJhc2VPYmplY3QiLCIkZmlyZWJhc2VBcnJheSIsIiRmaXJlYmFzZUF1dGgiLCJtYWluU2VydmljZSIsInNlYXJjaEVuZ2luZVNlcnZpY2UiLCJhY3RpdmVQYWdlIiwidGV4dCIsImluaXRNVCIsImFwaUtleSIsImF1dGhEb21haW4iLCJkYXRhYmFzZVVSTCIsInN0b3JhZ2VCdWNrZXQiLCJtZXNzYWdpbmdTZW5kZXJJZCIsImZpcmViYXNlIiwiaW5pdGlhbGl6ZUFwcCIsInJlZiIsImRhdGFiYXNlIiwiY2hpbGQiLCJsaXN0IiwiJGxvYWRlZCIsInRoZW4iLCJjb25zb2xlIiwibG9nIiwiZXJyb3IiLCJTdWJtaXRLZXl3b3JkIiwiYWRkS2V5d29yZCIsImtleXdvcmRzIiwiaW5wdXRrZXl3b3JkcyIsInJlc3VsdCIsIlN1Ym1pdCIsIiRhZGQiLCJ2YWx1ZSIsImZhY3RvcnkiLCIkaHR0cCIsIiRxIiwidGhpc2ZhY3QiLCJHZXRTYW1wbGUiLCJkZWZlciIsIm1ldGhvZCIsInVybCIsInN1Y2Nlc3MiLCJkYXRhIiwicmVzb2x2ZSIsImVyciIsInJlamVjdCIsInByb21pc2UiLCIkbW9kYWwiLCJzYW1wbGVTZXJ2aWNlIiwicmVhZFNhbXBsZURhdGEiLCJjcmVhdGVTYW1wbGUiLCJwdXNoIiwid2FybmluZyIsImNyZWF0ZU5ld1NhbXBsZSIsIm1vZGFsRGF0YSIsInJlYWQiLCJpZCIsImNiIiwicmVhZFNhbXBsZSIsInJlYWRBbGxTYW1wbGUiLCJ1cGRhdGVTYW1wbGUiLCJjdXJyZW50SUQiLCJpbmRleCIsImN1cnJlbnRJbmRleCIsImRlbGV0ZUNvbmZpcm0iLCJ0ZW1wbGF0ZSIsImRlbGV0ZVNhbXBsZSIsInNwbGljZSIsImNoZWNrRGF0YSIsIm1vZGFsTW9kZSIsInNob3dTYW1wbGUiLCJ0eXBlIiwibXlPdGhlck1vZGFsIiwicmVhZE9ubHkiLCIkcHJvbWlzZSIsImJDcmVhdGUiLCJKU09OIiwicGFyc2UiLCJjb250ZW50VHlwZSIsImRhdGFUeXBlIiwiaGVhZGVycyIsIlJlcXVlc3RWZXJpZmljYXRpb25Ub2tlbiIsIm9iaiIsInNjcnViU2VydmljZSIsIlNjcnViIiwic2V0U2NydWJEb21haW4iLCJGaWxlcGF0aCIsImZpbGVwYXRoIl0sIm1hcHBpbmdzIjoiQUFBQSxHQUFJQSxTQUNKLFdBQ1FBLElBQU1DLFFBQVFDLE9BQU8sV0FBWSxVQUFXLGFBQWMsYUFBYyxZQUFhLGlCQUFrQixhQUN2R0YsSUFBSUcsUUFBQSxpQkFBQSxvQkFBTyxTQUFVQyxFQUFnQkMsR0FDakNBLEVBQWtCQyxXQUFVLEdBQU9DLFdBQVcsS0FDOUNILEVBQ0NJLEtBQUssS0FDRkMsWUFBYSxvQkFBcUJDLFdBQVksYUFFakRGLEtBQUssV0FDRkMsWUFBYSw0QkFBNkJDLFdBQVksZUFDdkRDLFdBQ0NDLFdBQVksTUFFZkosS0FBSyxVQUNGQyxZQUFhLHNDQUF1Q0MsV0FBWSxjQUNqRUMsV0FDQ0MsV0FBWSxXQU01QixJQUFJQyxZQUNBQyxNQUFRLE9BQ1osV0FDSUMsT0FBT0MsU0FDSEMsYUFBZSxFQUNmQyxPQUFTLEVBQ1RDLGFBQWUsRUFDZkMsY0FBaUIscUJBQ2pCQyxRQUFXLEtBQ1hDLGFBQWdCLE1BQ2hCQyxhQUFnQixPQUNoQkMsUUFBVyxPQUNYQyxnQkFBbUIsT0FDbkJDLFdBQWMsUUFDZEMsV0FBYyxTQUNkQyxXQUFjLFNBQ2RDLFdBQWMsVUFFbEIsSUFBSUMsSUFDQUMsTUFBTyxHQUNQQyxPQUFRLEdBQ1JDLE1BQU8sRUFDUEMsT0FBUSxHQUNSQyxRQUFTLEVBQ1RDLE9BQVEsRUFDUkMsTUFBTyxPQUNQQyxNQUFPLEVBQ1BDLE1BQU8sR0FDUEMsUUFBUSxFQUNSQyxTQUFTLEVBRVRDLE9BQVEsSUFDUkMsSUFBSyxNQUNMQyxLQUFNLE9BR05DLEVBQWEsSUFDakJoQyxTQUFRaUMsS0FBTyxXQUNYLEdBQUlDLEdBQWNDLFNBQVNDLGVBQWUsVUFDeEIsT0FBZEosRUFDQUEsRUFB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REFDZkgsR0FBYUUsZUFBZUMsR0FBVWpFLEtBQUssU0FBU2tFLEdBQ2hEakUsUUFBUUMsSUFBSWdFLFlBTTVCLFdBQ0k3SyxJQUFJdUgsUUFBUSxnQkFBQSxRQUFBLEtBQWdCLFNBQVVDLEVBQU1DLEdBQ3hDLEdBQUlDLEtBdUJKLE9BckJBQSxHQUFTaUQsZUFBaUIsU0FBU0gsR0FDL0IzSixRQUFRaUMsTUFDUixJQUFJOEUsR0FBUUgsRUFBR0csT0FpQmYsT0FoQkFKLElBQ0lLLE9BQVEsT0FDUkMsSUFBSyx3QkFDTHNDLFlBQWEsa0NBQ2JwQyxNQUFRNkMsU0FBVUwsR0FDbEJILFNBQVUsT0FDVkMsU0FDSUMseUJBQTRCekosU0FFakNpSCxRQUFRLFNBQVNDLEdBQ2hCbkgsUUFBUTRDLE9BQ1JtRSxFQUFNSyxRQUFRRCxLQUNmbEIsTUFBTSxTQUFTa0IsR0FDZG5ILFFBQVE0QyxPQUNSbUUsRUFBTU8sT0FBT0gsS0FFVkosRUFBTVEsU0FFVlYsUUFJZixXQUNJMUgsSUFBSXVILFFBQVEsdUJBQUEsUUFBQSxLQUF1QixTQUFVQyxFQUFNQyxHQUMvQyxHQUFJQyxLQXdCSixPQXZCQUEsR0FBU1YsV0FBYSxTQUFTZ0IsR0FDM0JuSCxRQUFRaUMsTUFDUixJQUFJOEUsR0FBUUgsRUFBR0csT0FrQmYsT0FqQkFoQixTQUFRQyxJQUFJbUIsR0FDWlIsR0FDSUssT0FBUSxPQUNSQyxJQUFLLDJCQUNMc0MsWUFBYSxrQ0FDYnBDLEtBQU9BLEVBQ1BxQyxTQUFVLE9BQ1ZDLFNBQ0lDLHlCQUE0QnpKLFNBRWpDaUgsUUFBUSxTQUFTQyxHQUNoQm5ILFFBQVE0QyxPQUNSbUUsRUFBTUssUUFBUUQsS0FDZmxCLE1BQU0sU0FBU2tCLEdBQ2RuSCxRQUFRNEMsT0FDUm1FLEVBQU1PLE9BQU9ILEtBRVZKLEVBQU1RLFNBR1ZWIiwiZmlsZSI6ImFsbGphdmFzY3JpcHQuanMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgYXBwID0ge307XG4oZnVuY3Rpb24oKSB7XG4gICAgICAgIGFwcCA9IGFuZ3VsYXIubW9kdWxlKFwiTWFpbkFwcFwiLCBbJ25nUm91dGUnLCAnbmdTYW5pdGl6ZScsICduZ1Jlc291cmNlJywgJ25nQW5pbWF0ZScsICdtZ2NyZWEubmdTdHJhcCcsICdmaXJlYmFzZSddKTtcbiAgICAgICAgYXBwLmNvbmZpZyhmdW5jdGlvbiAoJHJvdXRlUHJvdmlkZXIsICRsb2NhdGlvblByb3ZpZGVyKSB7XG4gICAgICAgICAgICAkbG9jYXRpb25Qcm92aWRlci5odG1sNU1vZGUoZmFsc2UpLmhhc2hQcmVmaXgoJyEnKTtcbiAgICAgICAgICAgICRyb3V0ZVByb3ZpZGVyXG4gICAgICAgICAgICAud2hlbihcIi9cIix7XG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICcvdmlld3MvaW5kZXguaHRtbCcsIGNvbnRyb2xsZXI6ICdtYWluQ3RybCdcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAud2hlbihcIi9zYW1wbGVcIix7XG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICcvdmlld3Mvc2FtcGxlL3NhbXBsZS5odG1sJywgY29udHJvbGxlcjogJ3NhbXBsZUN0cmwnXG4gICAgICAgICAgICB9KS5vdGhlcndpc2Uoe1xuICAgICAgICAgICAgICAgIHJlZGlyZWN0VG86IFwiL1wiXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLndoZW4oXCIvc2NydWJcIix7XG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICcvdmlld3MvU2NydWJEb21haW4vc2NydWJkb21haW4uaHRtbCcsIGNvbnRyb2xsZXI6ICdzY3J1YkN0cmwnXG4gICAgICAgICAgICB9KS5vdGhlcndpc2Uoe1xuICAgICAgICAgICAgICAgIHJlZGlyZWN0VG86IFwiL1wiXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuKSgpO1xuXG52YXIgc3Bpbm5lciA9IHt9O1xudmFyIHRva2VuID0gXCJYWFhcIjtcbihmdW5jdGlvbigpIHtcbiAgICB0b2FzdHIub3B0aW9ucyA9IHtcbiAgICAgICAgXCJjbG9zZUJ1dHRvblwiOiBmYWxzZSxcbiAgICAgICAgXCJkZWJ1Z1wiOiBmYWxzZSxcbiAgICAgICAgXCJwcm9ncmVzc0JhclwiOiBmYWxzZSxcbiAgICAgICAgXCJwb3NpdGlvbkNsYXNzXCI6IFwidG9hc3QtYm90dG9tLXJpZ2h0XCIsXG4gICAgICAgIFwib25jbGlja1wiOiBudWxsLFxuICAgICAgICBcInNob3dEdXJhdGlvblwiOiBcIjMwMFwiLFxuICAgICAgICBcImhpZGVEdXJhdGlvblwiOiBcIjEwMDBcIixcbiAgICAgICAgXCJ0aW1lT3V0XCI6IFwiNTAwMFwiLFxuICAgICAgICBcImV4dGVuZGVkVGltZU91dFwiOiBcIjEwMDBcIixcbiAgICAgICAgXCJzaG93RWFzaW5nXCI6IFwic3dpbmdcIixcbiAgICAgICAgXCJoaWRlRWFzaW5nXCI6IFwibGluZWFyXCIsXG4gICAgICAgIFwic2hvd01ldGhvZFwiOiBcImZhZGVJblwiLFxuICAgICAgICBcImhpZGVNZXRob2RcIjogXCJmYWRlT3V0XCJcbiAgICB9O1xuICAgIHZhciBvcHRTcGluZXJNb2RhbCA9IHtcbiAgICAgICAgbGluZXM6IDExLCAvLyBUaGUgbnVtYmVyIG9mIGxpbmVzIHRvIGRyYXdcbiAgICAgICAgbGVuZ3RoOiAyMywgLy8gVGhlIGxlbmd0aCBvZiBlYWNoIGxpbmVcbiAgICAgICAgd2lkdGg6IDgsIC8vIFRoZSBsaW5lIHRoaWNrbmVzc1xuICAgICAgICByYWRpdXM6IDQwLCAvLyBUaGUgcmFkaXVzIG9mIHRoZSBpbm5lciBjaXJjbGVcbiAgICAgICAgY29ybmVyczogMSwgLy8gQ29ybmVyIHJvdW5kbmVzcyAoMC4uMSlcbiAgICAgICAgcm90YXRlOiA5LCAvLyBUaGUgcm90YXRpb24gb2Zmc2V0XG4gICAgICAgIGNvbG9yOiAnI0ZGRicsIC8vICNyZ2Igb3IgI3JyZ2diYlxuICAgICAgICBzcGVlZDogMSwgLy8gUm91bmRzIHBlciBzZWNvbmRcbiAgICAgICAgdHJhaWw6IDUwLCAvLyBBZnRlcmdsb3cgcGVyY2VudGFnZVxuICAgICAgICBzaGFkb3c6IGZhbHNlLCAvLyBXaGV0aGVyIHRvIHJlbmRlciBhIHNoYWRvd1xuICAgICAgICBod2FjY2VsOiB0cnVlLCAvLyBXaGV0aGVyIHRvIHVzZSBoYXJkd2FyZSBhY2NlbGVyYXRpb25cbiAgICAgICAgLy9jbGFzc05hbWU6ICdzcGlubmVyJywgLy8gVGhlIENTUyBjbGFzcyB0byBhc3NpZ24gdG8gdGhlIHNwaW5uZXJcbiAgICAgICAgekluZGV4OiAyZTksIC8vIFRoZSB6LWluZGV4IChkZWZhdWx0cyB0byAyMDAwMDAwMDAwKVxuICAgICAgICB0b3A6ICc1MCUnLCAvLyBUb3AgcG9zaXRpb24gcmVsYXRpdmUgdG8gcGFyZW50IGluIHB4XG4gICAgICAgIGxlZnQ6ICc1MCUnIC8vIExlZnQgcG9zaXRpb24gcmVsYXRpdmUgdG8gcGFyZW50IGluIHB4XG4gICAgfTtcblxuICAgIHZhciBzcGlubmVyT2JqID0gbnVsbDtcbiAgICBzcGlubmVyLnNob3cgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBzcGlubmVyX2RpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzcGlubmVyJyk7XG4gICAgICAgIGlmIChzcGlubmVyT2JqID09IG51bGwpIHtcbiAgICAgICAgICAgIHNwaW5uZXJPYmogPSBuZXcgU3Bpbm5lcihvcHRTcGluZXJNb2RhbCkuc3BpbihzcGlubmVyX2Rpdik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzcGlubmVyT2JqLnNwaW4oc3Bpbm5lcl9kaXYpO1xuICAgICAgICB9XG4gICAgICAgICQuYmxvY2tVSSh7bWVzc2FnZTogbnVsbCwgb3ZlcmxheUNTUzoge2JhY2tncm91bmRDb2xvcjogJyM1YzVjNWMnfX0pO1xuICAgIH1cblxuICAgIHNwaW5uZXIuaGlkZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHNwaW5uZXJfZGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NwaW5uZXInKTtcbiAgICAgICAgc3Bpbm5lck9iai5zdG9wKHNwaW5uZXJfZGl2KTtcbiAgICAgICAgJC51bmJsb2NrVUkoKTtcbiAgICB9XG59KSgpO1xuKGZ1bmN0aW9uKCkge1xuICAgIGFwcC5jb250cm9sbGVyKFwiZ2xvYmFsQ3RybFwiLCBmdW5jdGlvbiAoJHNjb3BlKSB7XG4gICAgICAgICRzY29wZS5wYWdlRGF0YSA9IFtcbiAgICAgICAgICAgIHtOYW1lOiAnSG9tZSd9LFxuICAgICAgICAgICAge05hbWU6ICdTYW1wbGUnfVxuICAgICAgICBdO1xuICAgICAgICAkc2NvcGUuZGlyZWN0aXZlVGVzdCA9IFwiSEVMTE8gV09STERcIjtcbiAgICB9KTtcbn0pKCk7XG4oZnVuY3Rpb24oKXtcbiAgICBhcHAuZGlyZWN0aXZlKCdkaXJlY3RpdmVTYW1wbGUnLGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcmVzdHJpY3Q6ICdBRUMnLFxuICAgICAgICAgICAgcmVwbGFjZTogdHJ1ZSxcbiAgICAgICAgICAgIHJlcXVpcmU6ICduZ01vZGVsJyxcbiAgICAgICAgICAgIHNjb3BlOiB0cnVlLFxuICAgICAgICAgICAgLy90ZW1wbGF0ZSA6IFwiXCIsXG4gICAgICAgICAgICAvL3RlbXBsYXRlVXJsIDogXCJcIixcbiAgICAgICAgICAgIGxpbms6IGZ1bmN0aW9uIChzY29wZSwgZWxlbWVudCwgYXR0ciwgbmdNb2RlbCkge1xuICAgICAgICAgICAgICAgIG5nTW9kZWwuJHJlbmRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5lbXB0eSgpO1xuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmFwcGVuZChuZ01vZGVsLiR2aWV3VmFsdWUpO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KTtcbn0pKCk7XG4oZnVuY3Rpb24oKSB7XG4gICAgRGF0ZS5wcm90b3R5cGUuYWRkSG91cnM9IGZ1bmN0aW9uKGgpe1xuICAgICAgICB0aGlzLnNldEhvdXJzKHRoaXMuZ2V0SG91cnMoKStoKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIGFwcC5maWx0ZXIoJ0RhdGVUcmljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChpbnB1dCkge1xuICAgICAgICAgICAgaWYgKGlucHV0ICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgdmFyIERhdGVDYWwgPSBpbnB1dC5hZGRIb3Vycyg3KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gRGF0ZUNhbDtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHt9O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSk7XG59KSgpO1xuKGZ1bmN0aW9uKCkge1xyXG4gICAgYXBwLmNvbnRyb2xsZXIoJ21haW5DdHJsJywgZnVuY3Rpb24oJHNjb3BlLCAkZmlyZWJhc2VPYmplY3QsICRmaXJlYmFzZUFycmF5LCAkZmlyZWJhc2VBdXRoLCBtYWluU2VydmljZSwgc2VhcmNoRW5naW5lU2VydmljZSkge1xyXG4gICAgICAgICRzY29wZS5hY3RpdmVQYWdlID0gMTtcclxuICAgICAgICAkc2NvcGUudGV4dCA9IFtdO1xyXG4gICAgICAgICRzY29wZS5tZXNzYWdlID0gXCJcIjtcclxuXHJcbiAgICAgICAgJHNjb3BlLmluaXRNVCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICB2YXIgY29uZmlnID0ge1xyXG4gICAgICAgICAgICAgICAgYXBpS2V5OiBcIkFJemFTeUFiQ2xOaGIwUEVuRlV2eDdWaWVtR2NPQjI2OHVSYU5xOFwiLFxyXG4gICAgICAgICAgICAgICAgYXV0aERvbWFpbjogXCJjaGF0LWY5YzVlLmZpcmViYXNlYXBwLmNvbVwiLFxyXG4gICAgICAgICAgICAgICAgZGF0YWJhc2VVUkw6IFwiaHR0cHM6Ly9jaGF0LWY5YzVlLmZpcmViYXNlaW8uY29tXCIsXHJcbiAgICAgICAgICAgICAgICBzdG9yYWdlQnVja2V0OiBcImNoYXQtZjljNWUuYXBwc3BvdC5jb21cIixcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2luZ1NlbmRlcklkOiBcIjMwMzUzMzYwMDM3MVwiXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIGZpcmViYXNlLmluaXRpYWxpemVBcHAoY29uZmlnKTtcclxuICAgICAgICAgICAgJHNjb3BlLnJlZiA9IGZpcmViYXNlLmRhdGFiYXNlKCkucmVmKCkuY2hpbGQoXCJjaGF0LWY5YzVlXCIpO1xyXG4gICAgICAgICAgICAkc2NvcGUubGlzdCA9ICRmaXJlYmFzZUFycmF5KCRzY29wZS5yZWYpO1xyXG4gICAgICAgICAgICAkc2NvcGUubGlzdC4kbG9hZGVkKClcclxuICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKG1lc3NhZ2UpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIk1lYWFzZ2U6XCIsIG1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5tZXNzYWdlID0gbWVzc2FnZTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAuY2F0Y2goZnVuY3Rpb24oZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkVycm9yOlwiLCBlcnJvcik7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkc2NvcGUuU3VibWl0S2V5d29yZCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBzZWFyY2hFbmdpbmVTZXJ2aWNlLmFkZEtleXdvcmQoe1xyXG4gICAgICAgICAgICAgICAga2V5d29yZHM6ICRzY29wZS5pbnB1dGtleXdvcmRzXHJcbiAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24ocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXN1bHQpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgJHNjb3BlLlN1Ym1pdCA9IGZ1bmN0aW9uKHRleHQpIHtcclxuICAgICAgICAgICAgJHNjb3BlLmxpc3QuJGFkZCh7XHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiB0ZXh0XHJcbiAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24odmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwidmFsdWVzOiBcIiwgdmFsdWUpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgfSk7XHJcbn0pKCk7XHJcblxuKGZ1bmN0aW9uKCl7XG4gICAgYXBwLmZhY3RvcnkoJ21haW5TZXJ2aWNlJywgZnVuY3Rpb24gKCRodHRwLCRxKSB7XG4gICAgICAgIHZhciB0aGlzZmFjdCA9IHt9O1xuICAgICAgICB0aGlzZmFjdC5HZXRTYW1wbGUgPSBmdW5jdGlvbigpe1xuICAgICAgICAgICAgc3Bpbm5lci5zaG93KCk7XG4gICAgICAgICAgICB2YXIgZGVmZXIgPSAkcS5kZWZlcigpO1xuICAgICAgICAgICAgJGh0dHAoe21ldGhvZDogJ0dFVCcsIHVybDogJy8nfSkuXG4gICAgICAgICAgICAgICAgc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIHNwaW5uZXIuaGlkZSgpO1xuICAgICAgICAgICAgICAgICAgICBkZWZlci5yZXNvbHZlKGRhdGEpO1xuICAgICAgICAgICAgICAgIH0pLlxuICAgICAgICAgICAgICAgIGVycm9yKGZ1bmN0aW9uKGVycikge1xuICAgICAgICAgICAgICAgICAgICBzcGlubmVyLmhpZGUoKTtcbiAgICAgICAgICAgICAgICAgICAgZGVmZXIucmVqZWN0KGVycik7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gZGVmZXIucHJvbWlzZTtcbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4gdGhpc2ZhY3Q7XG5cbiAgICB9KTtcbn0pKCk7XG5cbihmdW5jdGlvbigpIHtcbiAgICBhcHAuY29udHJvbGxlcignc2FtcGxlQ3RybCcsIGZ1bmN0aW9uICgkc2NvcGUsICRtb2RhbCwgc2FtcGxlU2VydmljZSkge1xuICAgICAgICAkc2NvcGUuYWN0aXZlUGFnZSA9IDI7IC8vXCJTYW1wbGVcIjtcbiAgICAgICAgJHNjb3BlLnJlYWRTYW1wbGVEYXRhID0gW107XG5cbiAgICAgICAgLy8vLS0tLS0tLS0tLS0tIENyZWF0ZSBTZWN0aW9uIC0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAkc2NvcGUuY3JlYXRlU2FtcGxlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgc2FtcGxlU2VydmljZS5jcmVhdGVTYW1wbGUoKS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0ICE9IFwiRVJST1JcIikge1xuICAgICAgICAgICAgICAgICAgICB0b2FzdHIuc3VjY2Vzcygn4LiB4Liy4Lij4Lia4Lix4LiZ4LiX4Li24LiB4Liq4Liz4LmA4Lij4LmH4LiIJywgJ+C4geC4suC4o+C4muC4seC4meC4l+C4tuC4geC4guC5ieC4reC4oeC4ueC4pScpO1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUucmVhZFNhbXBsZURhdGEucHVzaChyZXN1bHQpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRvYXN0ci53YXJuaW5nKCfguIHguLLguKPguJrguLHguJnguJfguLbguIHguJzguLTguJTguJ7guKXguLLguJQnICsgcmVzdWx0LCAn4LiB4Liy4Lij4Lia4Lix4LiZ4LiX4Li24LiB4LiC4LmJ4Lit4Lih4Li54LilJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfTtcbiAgICAgICAgJHNjb3BlLmNyZWF0ZU5ld1NhbXBsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHNhbXBsZVNlcnZpY2UuY3JlYXRlTmV3U2FtcGxlKCRzY29wZS5tb2RhbERhdGEpLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQgIT0gXCJFUlJPUlwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHRvYXN0ci5zdWNjZXNzKCfguIHguLLguKPguJrguLHguJnguJfguLbguIHguKrguLPguYDguKPguYfguIgnLCAn4LiB4Liy4Lij4Lia4Lix4LiZ4LiX4Li24LiB4LiC4LmJ4Lit4Lih4Li54LilJyk7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5yZWFkU2FtcGxlRGF0YS5wdXNoKHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdG9hc3RyLndhcm5pbmcoJ+C4geC4suC4o+C4m+C4o+C4seC4muC4m+C4o+C4uOC4h+C4nOC4tOC4lOC4nuC4peC4suC4lCcgKyByZXN1bHQsICfguIHguLLguKPguJvguKPguLHguJrguJvguKPguLjguIfguJzguLTguJTguJ7guKXguLLguJQnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICAvLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbiAgICAgICAgLy8vLS0tLS0tLS0tLS0tLSBSZWFkIFNlY3Rpb24gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAkc2NvcGUubW9kYWxEYXRhID0ge307XG4gICAgICAgICRzY29wZS5yZWFkID0gZnVuY3Rpb24gKGlkLCBjYikge1xuICAgICAgICAgICAgc2FtcGxlU2VydmljZS5yZWFkU2FtcGxlKGlkKS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICBjYihyZXN1bHQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgJHNjb3BlLnJlYWRBbGxTYW1wbGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBzYW1wbGVTZXJ2aWNlLnJlYWRBbGxTYW1wbGUoKS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0ICE9IFwiRVJST1JcIikge1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUucmVhZFNhbXBsZURhdGEgPSByZXN1bHQ7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdG9hc3RyLndhcm5pbmcoJ+C4geC4suC4o+C4reC5iOC4suC4meC4guC5ieC4reC4oeC4ueC4peC4nOC4tOC4lOC4nuC4peC4suC4lCcgKyByZXN1bHQsICfguIHguLLguKPguK3guYjguLLguJnguILguYnguK3guKHguLnguKXguJzguLTguJTguJ7guKXguLLguJQnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICB9O1xuICAgICAgICAvLyBUT0RPIDogUGFnaW5hdGlvbiBTZXJ2ZXJzaWRlIFJlYWREYXRhXG5cbiAgICAgICAgLy8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG4gICAgICAgIC8vLy0tLS0tLS0tLS0tLS0gVXBkYXRlIFNlY3Rpb24gLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgJHNjb3BlLnVwZGF0ZVNhbXBsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBpZCA9ICRzY29wZS5jdXJyZW50SUQ7XG4gICAgICAgICAgICB2YXIgaW5kZXggPSAkc2NvcGUuY3VycmVudEluZGV4O1xuICAgICAgICAgICAgc2FtcGxlU2VydmljZS51cGRhdGVTYW1wbGUoJHNjb3BlLm1vZGFsRGF0YSwgaWQpLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQgIT0gXCJFUlJPUlwiKSB7XG4gICAgICAgICAgICAgICAgICAgICRzY29wZS5yZWFkU2FtcGxlRGF0YVtpbmRleF0gPSAkc2NvcGUubW9kYWxEYXRhO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRvYXN0ci53YXJuaW5nKCfguIHguLLguKPguJvguKPguLHguJrguJvguKPguLjguIfguJzguLTguJTguJ7guKXguLLguJQnICsgcmVzdWx0LCAn4LiB4Liy4Lij4Lib4Lij4Lix4Lia4Lib4Lij4Li44LiH4Lic4Li04LiU4Lie4Lil4Liy4LiUJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICAvLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbiAgICAgICAgLy8vLS0tLS0tLS0tLS0tLSBEZWxldGUgU2VjdGlvbiAtLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAkc2NvcGUuZGVsZXRlQ29uZmlybSA9IGZ1bmN0aW9uIChpZCwgaW5kZXgpIHtcbiAgICAgICAgICAgICRzY29wZS5jdXJyZW50SUQgPSBpZDtcbiAgICAgICAgICAgICRzY29wZS5jdXJyZW50SW5kZXggPSBpbmRleDtcbiAgICAgICAgICAgICRtb2RhbCh7c2NvcGU6ICRzY29wZSwgdGVtcGxhdGU6ICcvdmlld3Mvc2FtcGxlL21vZGFsL3NhbXBsZUNvbmZpcm0uaHRtbCcsIHNob3c6IHRydWV9KTtcbiAgICAgICAgfTtcbiAgICAgICAgJHNjb3BlLmRlbGV0ZVNhbXBsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBpZCA9ICRzY29wZS5jdXJyZW50SUQ7XG4gICAgICAgICAgICB2YXIgaW5kZXggPSAkc2NvcGUuY3VycmVudEluZGV4O1xuXG4gICAgICAgICAgICBzYW1wbGVTZXJ2aWNlLmRlbGV0ZVNhbXBsZShpZCkudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdCAhPSBcIkVSUk9SXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnJlYWRTYW1wbGVEYXRhLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdG9hc3RyLndhcm5pbmcoJ+C4geC4suC4o+C4peC4muC4nOC4tOC4lOC4nuC4peC4suC4lCcgKyByZXN1bHQsICfguIHguLLguKPguKXguJrguJzguLTguJTguJ7guKXguLLguJQnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICB9O1xuICAgICAgICAvLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbiAgICAgICAgLy8vLS0tLS0tLS0tLS0tLS0gT3RoZXIgU2VjdGlvbiAtLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAkc2NvcGUuY2hlY2tEYXRhID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgc3dpdGNoICgkc2NvcGUubW9kYWxNb2RlKSB7XG4gICAgICAgICAgICAgICAgY2FzZSBcImNyZWF0ZVwiIDpcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmNyZWF0ZU5ld1NhbXBsZSgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwiZWRpdFwiIDpcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLnVwZGF0ZVNhbXBsZSgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAkc2NvcGUuc2hvd1NhbXBsZSA9IGZ1bmN0aW9uICh0eXBlLCBpZCwgaW5kZXgpIHtcbiAgICAgICAgICAgICRzY29wZS5tb2RhbE1vZGUgPSB0eXBlO1xuICAgICAgICAgICAgJHNjb3BlLmN1cnJlbnRJRCA9IGlkO1xuICAgICAgICAgICAgJHNjb3BlLmN1cnJlbnRJbmRleCA9IGluZGV4O1xuICAgICAgICAgICAgdmFyIG15T3RoZXJNb2RhbCA9ICRtb2RhbCh7c2NvcGU6ICRzY29wZSwgdGVtcGxhdGU6ICcvdmlld3Mvc2FtcGxlL21vZGFsL3NhbXBsZU1vZGFsLmh0bWwnLCBzaG93OiBmYWxzZX0pO1xuXG4gICAgICAgICAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgICAgICAgICBjYXNlICdjcmVhdGUnIDpcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLm1vZGFsRGF0YSA9IHt9O1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUubW9kYWxEYXRhLnJlYWRPbmx5ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIG15T3RoZXJNb2RhbC4kcHJvbWlzZS50aGVuKG15T3RoZXJNb2RhbC5zaG93KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnc2hvdycgOlxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUucmVhZChpZCwgZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdCAhPSBcIkVSUk9SXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBteU90aGVyTW9kYWwuJHByb21pc2UudGhlbihteU90aGVyTW9kYWwuc2hvdyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLm1vZGFsRGF0YSA9IHJlc3VsdDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUubW9kYWxEYXRhLmJDcmVhdGUgPSBKU09OLnBhcnNlKHJlc3VsdC5iQ3JlYXRlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUubW9kYWxEYXRhLnJlYWRPbmx5ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9hc3RyLndhcm5pbmcoJ+C4geC4suC4o+C4reC5iOC4suC4meC4guC5ieC4reC4oeC4ueC4peC4nOC4tOC4lOC4nuC4peC4suC4lCcgKyByZXN1bHQsICfguIHguLLguKPguK3guYjguLLguJnguILguYnguK3guKHguLnguKXguJzguLTguJTguJ7guKXguLLguJQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnZWRpdCcgOlxuICAgICAgICAgICAgICAgICAgICAkc2NvcGUucmVhZChpZCwgZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdCAhPSBcIkVSUk9SXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBteU90aGVyTW9kYWwuJHByb21pc2UudGhlbihteU90aGVyTW9kYWwuc2hvdyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLm1vZGFsRGF0YSA9IHJlc3VsdDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUubW9kYWxEYXRhLmJDcmVhdGUgPSBKU09OLnBhcnNlKHJlc3VsdC5iQ3JlYXRlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUubW9kYWxEYXRhLnJlYWRPbmx5ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvYXN0ci53YXJuaW5nKCfguIHguLLguKPguK3guYjguLLguJnguILguYnguK3guKHguLnguKXguJzguLTguJTguJ7guKXguLLguJQnICsgcmVzdWx0LCAn4LiB4Liy4Lij4Lit4LmI4Liy4LiZ4LiC4LmJ4Lit4Lih4Li54Lil4Lic4Li04LiU4Lie4Lil4Liy4LiUJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgLy8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgIH0pO1xufSkoKTtcblxuKGZ1bmN0aW9uKCl7XG4gICAgYXBwLmZhY3RvcnkoJ3NhbXBsZVNlcnZpY2UnLCBmdW5jdGlvbiAoJGh0dHAsJHEpIHtcbiAgICAgICAgdmFyIHRoaXNmYWN0ID0ge307XG4gICAgICAgIHRoaXNmYWN0LmNyZWF0ZVNhbXBsZSA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICBzcGlubmVyLnNob3coKTtcbiAgICAgICAgICAgIHZhciBkZWZlciA9ICRxLmRlZmVyKCk7XG4gICAgICAgICAgICAgICAgJGh0dHAoe1xuICAgICAgICAgICAgICAgICAgICBtZXRob2Q6IFwiR0VUXCIsXG4gICAgICAgICAgICAgICAgICAgIHVybDogJy9zYW1wbGUvY3JlYXRlJyxcbiAgICAgICAgICAgICAgICAgICAgY29udGVudFR5cGU6ICdhcHBsaWNhdGlvbi9qc29uOyBjaGFyc2V0PXV0Zi04JyxcbiAgICAgICAgICAgICAgICAgICAgZGF0YVR5cGU6ICdqc29uJyxcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgJ1JlcXVlc3RWZXJpZmljYXRpb25Ub2tlbic6IHRva2VuXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgc3Bpbm5lci5oaWRlKCk7XG4gICAgICAgICAgICAgICAgICAgIGRlZmVyLnJlc29sdmUoZGF0YSk7XG4gICAgICAgICAgICAgICAgfSkuZXJyb3IoZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICBzcGlubmVyLmhpZGUoKTtcbiAgICAgICAgICAgICAgICAgICAgZGVmZXIucmVqZWN0KGRhdGEpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIGRlZmVyLnByb21pc2U7XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpc2ZhY3QuY3JlYXRlTmV3U2FtcGxlID0gZnVuY3Rpb24ob2JqKXtcbiAgICAgICAgICAgIHNwaW5uZXIuc2hvdygpO1xuICAgICAgICAgICAgdmFyIGRlZmVyID0gJHEuZGVmZXIoKTtcbiAgICAgICAgICAgICRodHRwKHtcbiAgICAgICAgICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICAgICAgICAgIHVybDogJy9zYW1wbGUvY3JlYXRlbmV3JyxcbiAgICAgICAgICAgICAgICBjb250ZW50VHlwZTogJ2FwcGxpY2F0aW9uL2pzb247IGNoYXJzZXQ9dXRmLTgnLFxuICAgICAgICAgICAgICAgIGRhdGE6IHsgTmFtZTogb2JqLk5hbWUsIGJDcmVhdGU6IG9iai5iQ3JlYXRlfSxcbiAgICAgICAgICAgICAgICBkYXRhVHlwZTogJ2pzb24nLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgJ1JlcXVlc3RWZXJpZmljYXRpb25Ub2tlbic6IHRva2VuXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSkuc3VjY2VzcyhmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgc3Bpbm5lci5oaWRlKCk7XG4gICAgICAgICAgICAgICAgZGVmZXIucmVzb2x2ZShkYXRhKTtcbiAgICAgICAgICAgIH0pLmVycm9yKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICBzcGlubmVyLmhpZGUoKTtcbiAgICAgICAgICAgICAgICBkZWZlci5yZWplY3QoZGF0YSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBkZWZlci5wcm9taXNlO1xuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXNmYWN0LnJlYWRBbGxTYW1wbGUgPSBmdW5jdGlvbigpe1xuICAgICAgICAgICAgc3Bpbm5lci5zaG93KCk7XG4gICAgICAgICAgICB2YXIgZGVmZXIgPSAkcS5kZWZlcigpO1xuICAgICAgICAgICAgICAgICRodHRwKFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgICAgICAgICAgICAgICAgdXJsOiAnL3NhbXBsZS9yZWFkJyxcbiAgICAgICAgICAgICAgICAgICAgY29udGVudFR5cGU6ICdhcHBsaWNhdGlvbi9qc29uOyBjaGFyc2V0PXV0Zi04JyxcbiAgICAgICAgICAgICAgICAgICAgZGF0YVR5cGU6ICdqc29uJyxcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgJ1JlcXVlc3RWZXJpZmljYXRpb25Ub2tlbic6IHRva2VuXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgc3Bpbm5lci5oaWRlKCk7XG4gICAgICAgICAgICAgICAgICAgIGRlZmVyLnJlc29sdmUoZGF0YSk7XG4gICAgICAgICAgICAgICAgfSkuZXJyb3IoZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICBzcGlubmVyLmhpZGUoKTtcbiAgICAgICAgICAgICAgICAgICAgZGVmZXIucmVqZWN0KGRhdGEpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIGRlZmVyLnByb21pc2U7XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpc2ZhY3QuZGVsZXRlU2FtcGxlID0gZnVuY3Rpb24oaWQpe1xuICAgICAgICAgICAgc3Bpbm5lci5zaG93KCk7XG4gICAgICAgICAgICB2YXIgZGVmZXIgPSAkcS5kZWZlcigpO1xuICAgICAgICAgICAgICAgICRodHRwKHtcbiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgICAgICAgICAgICAgICAgdXJsOiAnL3NhbXBsZS9kZWxldGUvJytpZCxcbiAgICAgICAgICAgICAgICAgICAgY29udGVudFR5cGU6ICdhcHBsaWNhdGlvbi9qc29uOyBjaGFyc2V0PXV0Zi04JyxcbiAgICAgICAgICAgICAgICAgICAgZGF0YVR5cGU6ICdqc29uJyxcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgJ1JlcXVlc3RWZXJpZmljYXRpb25Ub2tlbic6IHRva2VuXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgc3Bpbm5lci5oaWRlKCk7XG4gICAgICAgICAgICAgICAgICAgIGRlZmVyLnJlc29sdmUoZGF0YSk7XG4gICAgICAgICAgICAgICAgfSkuZXJyb3IoZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICBzcGlubmVyLmhpZGUoKTtcbiAgICAgICAgICAgICAgICAgICAgZGVmZXIucmVqZWN0KGRhdGEpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIGRlZmVyLnByb21pc2U7XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpc2ZhY3QucmVhZFNhbXBsZSA9IGZ1bmN0aW9uKGlkKXtcbiAgICAgICAgICAgIHNwaW5uZXIuc2hvdygpO1xuICAgICAgICAgICAgdmFyIGRlZmVyID0gJHEuZGVmZXIoKTtcbiAgICAgICAgICAgICAgICAkaHR0cCh7XG4gICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICAgICAgICAgICAgICAgIHVybDogJy9zYW1wbGUvcmVhZC8nK2lkLFxuICAgICAgICAgICAgICAgICAgICBjb250ZW50VHlwZTogJ2FwcGxpY2F0aW9uL2pzb247IGNoYXJzZXQ9dXRmLTgnLFxuICAgICAgICAgICAgICAgICAgICBkYXRhVHlwZTogJ2pzb24nLFxuICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAnUmVxdWVzdFZlcmlmaWNhdGlvblRva2VuJzogdG9rZW5cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICBzcGlubmVyLmhpZGUoKTtcbiAgICAgICAgICAgICAgICAgICAgZGVmZXIucmVzb2x2ZShkYXRhKTtcbiAgICAgICAgICAgICAgICB9KS5lcnJvcihmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIHNwaW5uZXIuaGlkZSgpO1xuICAgICAgICAgICAgICAgICAgICBkZWZlci5yZWplY3QoZGF0YSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gZGVmZXIucHJvbWlzZTtcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzZmFjdC51cGRhdGVTYW1wbGUgPSBmdW5jdGlvbihvYmosaWQpe1xuICAgICAgICAgICAgc3Bpbm5lci5zaG93KCk7XG4gICAgICAgICAgICB2YXIgZGVmZXIgPSAkcS5kZWZlcigpO1xuICAgICAgICAgICAgICAgICRodHRwKHtcbiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgICAgICAgICAgICAgdXJsOiAnL3NhbXBsZS91cGRhdGUvJytpZCxcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogeyBOYW1lOiBvYmouTmFtZSwgYkNyZWF0ZTogb2JqLmJDcmVhdGV9LFxuICAgICAgICAgICAgICAgICAgICBjb250ZW50VHlwZTogJ2FwcGxpY2F0aW9uL2pzb247IGNoYXJzZXQ9dXRmLTgnLFxuICAgICAgICAgICAgICAgICAgICBkYXRhVHlwZTogJ2pzb24nLFxuICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAnUmVxdWVzdFZlcmlmaWNhdGlvblRva2VuJzogdG9rZW5cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICBzcGlubmVyLmhpZGUoKTtcbiAgICAgICAgICAgICAgICAgICAgZGVmZXIucmVzb2x2ZShkYXRhKTtcbiAgICAgICAgICAgICAgICB9KS5lcnJvcihmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIHNwaW5uZXIuaGlkZSgpO1xuICAgICAgICAgICAgICAgICAgICBkZWZlci5yZWplY3QoZGF0YSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gZGVmZXIucHJvbWlzZTtcbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4gdGhpc2ZhY3Q7XG5cbiAgICB9KTtcbn0pKCk7XG4oZnVuY3Rpb24oKSB7XG4gICAgYXBwLmNvbnRyb2xsZXIoJ3NjcnViQ3RybCcsIGZ1bmN0aW9uICgkc2NvcGUsICRtb2RhbCwgc2NydWJTZXJ2aWNlKSB7XG5cbiAgICAgICAgJHNjb3BlLlNjcnViID17fTtcbiAgICAgICAgJHNjb3BlLnNldFNjcnViRG9tYWluID0gZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIHZhciBGaWxlcGF0aCA9IFwiQzovVXNlcnMvaXRwYml3L0Rlc2t0b3AvU2NydWJGaWxlL3NjcnViRXhwb3J0LnR4dFwiO1xuICAgICAgICAgICAgc2NydWJTZXJ2aWNlLnNldFNjcnViRG9tYWluKEZpbGVwYXRoKS50aGVuKGZ1bmN0aW9uKGZpbGVwYXRoKXtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhmaWxlcGF0aCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICB9KTtcbn0pKCk7XG5cbihmdW5jdGlvbigpe1xuICAgIGFwcC5mYWN0b3J5KCdzY3J1YlNlcnZpY2UnLCBmdW5jdGlvbiAoJGh0dHAsJHEpIHtcbiAgICAgICAgdmFyIHRoaXNmYWN0ID0ge307XG5cbiAgICAgICAgdGhpc2ZhY3Quc2V0U2NydWJEb21haW4gPSBmdW5jdGlvbihvYmope1xuICAgICAgICAgICAgc3Bpbm5lci5zaG93KCk7XG4gICAgICAgICAgICB2YXIgZGVmZXIgPSAkcS5kZWZlcigpO1xuICAgICAgICAgICAgJGh0dHAoe1xuICAgICAgICAgICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgICAgICAgICAgdXJsOiAnL3NjcnViL3NldFNjcnViRG9tYWluJyxcbiAgICAgICAgICAgICAgICBjb250ZW50VHlwZTogJ2FwcGxpY2F0aW9uL2pzb247IGNoYXJzZXQ9dXRmLTgnLFxuICAgICAgICAgICAgICAgIGRhdGE6IHsgZmlsZXBhdGg6IG9ian0sXG4gICAgICAgICAgICAgICAgZGF0YVR5cGU6ICdqc29uJyxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgICAgICdSZXF1ZXN0VmVyaWZpY2F0aW9uVG9rZW4nOiB0b2tlblxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgIHNwaW5uZXIuaGlkZSgpO1xuICAgICAgICAgICAgICAgIGRlZmVyLnJlc29sdmUoZGF0YSk7XG4gICAgICAgICAgICB9KS5lcnJvcihmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgc3Bpbm5lci5oaWRlKCk7XG4gICAgICAgICAgICAgICAgZGVmZXIucmVqZWN0KGRhdGEpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gZGVmZXIucHJvbWlzZTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIHRoaXNmYWN0O1xuXG4gICAgfSk7XG59KSgpO1xuKGZ1bmN0aW9uKCl7XG4gICAgYXBwLmZhY3RvcnkoJ3NlYXJjaEVuZ2luZVNlcnZpY2UnLCBmdW5jdGlvbiAoJGh0dHAsJHEpIHtcbiAgICAgICAgdmFyIHRoaXNmYWN0ID0ge307XG4gICAgICAgIHRoaXNmYWN0LmFkZEtleXdvcmQgPSBmdW5jdGlvbihkYXRhKXtcbiAgICAgICAgICAgIHNwaW5uZXIuc2hvdygpO1xuICAgICAgICAgICAgdmFyIGRlZmVyID0gJHEuZGVmZXIoKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpO1xuICAgICAgICAgICAgJGh0dHAoe1xuICAgICAgICAgICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgICAgICAgICAgdXJsOiAnL3NlYXJjaGVuZ2luZS9hZGRLZXl3b3JkJyxcbiAgICAgICAgICAgICAgICBjb250ZW50VHlwZTogJ2FwcGxpY2F0aW9uL2pzb247IGNoYXJzZXQ9dXRmLTgnLFxuICAgICAgICAgICAgICAgIGRhdGEgOiBkYXRhLFxuICAgICAgICAgICAgICAgIGRhdGFUeXBlOiAnanNvbicsXG4gICAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICAgICAnUmVxdWVzdFZlcmlmaWNhdGlvblRva2VuJzogdG9rZW5cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KS5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICBzcGlubmVyLmhpZGUoKTtcbiAgICAgICAgICAgICAgICBkZWZlci5yZXNvbHZlKGRhdGEpO1xuICAgICAgICAgICAgfSkuZXJyb3IoZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgIHNwaW5uZXIuaGlkZSgpO1xuICAgICAgICAgICAgICAgIGRlZmVyLnJlamVjdChkYXRhKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIGRlZmVyLnByb21pc2U7XG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIHRoaXNmYWN0O1xuICAgIH0pO1xufSkoKTsiXX0=
